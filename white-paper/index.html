
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../lite-paper-v3/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>White Paper - Nerge Protocol Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nerge-protocols-mathematical-foundations-and-mechanisms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Nerge Protocol Documentation" class="md-header__button md-logo" aria-label="Nerge Protocol Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nerge Protocol Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              White Paper
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label=""  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Nerge Protocol Documentation" class="md-nav__button md-logo" aria-label="Nerge Protocol Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Nerge Protocol Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../landing-page.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Landing Page
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lite-paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lite Paper V1
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lite-paper-v2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lite Paper V2
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lite-paper-v3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lite Paper V3
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    White Paper
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    White Paper
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      
        Abstract
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-note" class="md-nav__link">
    <span class="md-ellipsis">
      
        ⚠️ IMPLEMENTATION NOTE
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-background-and-motivation" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Background and Motivation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-our-contribution" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Our Contribution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Organization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-mathematical-models-and-proofs" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mathematical Models and Proofs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Mathematical Models and Proofs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-impermanent-loss-protection-via-synthetic-hedging" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Impermanent Loss Protection via Synthetic Hedging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Impermanent Loss Protection via Synthetic Hedging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-synthetic-hedge-construction-via-protocol-reserve" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.2 Synthetic Hedge Construction via Protocol Reserve
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-protection-valuation-using-merton-jump-diffusion-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.3 Protection Valuation Using Merton Jump-Diffusion Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-optimal-protection-parameters-not-tradeable-strikes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.4 Optimal Protection Parameters (Not Tradeable Strikes)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-protection-effectiveness" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.5 Protection Effectiveness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-regulatory-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.6 Regulatory Classification
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-mev-resistant-batch-auction-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 MEV-Resistant Batch Auction Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 MEV-Resistant Batch Auction Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-batch-auction-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2 Batch Auction Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-incentive-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.3 Incentive Compatibility
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-mev-elimination" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.4 MEV Elimination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#225-optimal-batch-duration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.5 Optimal Batch Duration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-gradual-liquidation-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Gradual Liquidation Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 Gradual Liquidation Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-queuing-theory-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2 Queuing Theory Framework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-dutch-auction-price-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.3 Dutch Auction Price Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-cascade-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.4 Cascade Prevention
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-optimal-tranche-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.5 Optimal Tranche Size
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-multi-oracle-consensus-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Multi-Oracle Consensus Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4 Multi-Oracle Consensus Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241-byzantine-fault-tolerance-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.1 Byzantine Fault Tolerance Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242-stake-weighted-median-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.2 Stake-Weighted Median Aggregation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243-outlier-detection-and-slashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.3 Outlier Detection and Slashing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244-multi-round-consensus-with-commit-reveal" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.4 Multi-Round Consensus with Commit-Reveal
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-advanced-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Advanced Mechanisms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Advanced Mechanisms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-reinforcement-learning-for-interest-rates" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Reinforcement Learning for Interest Rates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Reinforcement Learning for Interest Rates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-markov-decision-process-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.2 Markov Decision Process Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-q-learning-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.3 Q-Learning Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314-deep-q-network-extension" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.4 Deep Q-Network Extension
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#315-theoretical-performance-bound" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.5 Theoretical Performance Bound
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-portfolio-optimization-for-protocol-treasury" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Portfolio Optimization for Protocol Treasury
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Portfolio Optimization for Protocol Treasury">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-modern-portfolio-theory-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.1 Modern Portfolio Theory Framework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-mean-variance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.2 Mean-Variance Optimization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-black-litterman-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.3 Black-Litterman Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-dynamic-rebalancing" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.4 Dynamic Rebalancing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-dynamic-risk-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Dynamic Risk Parameters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 Dynamic Risk Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-volatility-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3.1 Volatility Estimation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-dynamic-loan-to-value-ratios" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3.2 Dynamic Loan-to-Value Ratios
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-token-design-and-economics" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Token Design and Economics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Token Design and Economics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-dual-token-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Dual Token Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Dual Token Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-governance-token-gov" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1.1 Governance Token (GOV)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-utility-token-util" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1.2 Utility Token (UTIL)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-vote-escrowed-tokenomics" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Vote-Escrowed Tokenomics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Vote-Escrowed Tokenomics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-locking-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.1 Locking Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-boost-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.2 Boost Calculation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-game-theory-of-locking" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.3 Game Theory of Locking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-fee-structure-and-value-accrual" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Fee Structure and Value Accrual
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Fee Structure and Value Accrual">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-revenue-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.1 Revenue Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-fee-distribution-waterfall" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.2 Fee Distribution Waterfall
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-token-valuation-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.3 Token Valuation Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-util-token-equilibrium" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.4 UTIL Token Equilibrium
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-incentive-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 Incentive Mechanisms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.4 Incentive Mechanisms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-liquidity-mining-schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.1 Liquidity Mining Schedule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442-pair-specific-multipliers" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.2 Pair-Specific Multipliers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443-bribes-and-gauge-voting" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.3 Bribes and Gauge Voting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#444-anti-vampire-attack-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.4 Anti-Vampire Attack Mechanisms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-security-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Security Analysis
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Security Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-protocol-solvency" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Protocol Solvency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-mev-attack-impossibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 MEV Attack Impossibility
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-oracle-manipulation-resistance" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Oracle Manipulation Resistance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-liquidation-cascade-resistance" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Liquidation Cascade Resistance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-smart-contract-security" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 Smart Contract Security
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-implementation-on-sui" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Implementation on Sui
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Implementation on Sui">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-sui-blockchain-advantages" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Sui Blockchain Advantages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-object-centric-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Object-Centric Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-gas-economics" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Gas Economics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-move-programming-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Move Programming Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Conclusion
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-summary-of-contributions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Summary of Contributions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-future-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Future Work
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-broader-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Broader Impact
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. References
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#academic-papers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Academic Papers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeFi Research
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockchain-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blockchain Systems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-foundations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mathematical Foundations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-notation-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix A: Notation Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-parameter-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix B: Parameter Calibration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c-code-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix C: Code Repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-d-terminology-clarification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix D: Terminology Clarification
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix D: Terminology Clarification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synthetic-vs-traditional-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synthetic vs Traditional Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-docs.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer Docs
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      
        Abstract
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-note" class="md-nav__link">
    <span class="md-ellipsis">
      
        ⚠️ IMPLEMENTATION NOTE
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-background-and-motivation" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Background and Motivation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-our-contribution" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Our Contribution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Organization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-mathematical-models-and-proofs" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mathematical Models and Proofs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Mathematical Models and Proofs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-impermanent-loss-protection-via-synthetic-hedging" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Impermanent Loss Protection via Synthetic Hedging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 Impermanent Loss Protection via Synthetic Hedging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-synthetic-hedge-construction-via-protocol-reserve" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.2 Synthetic Hedge Construction via Protocol Reserve
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213-protection-valuation-using-merton-jump-diffusion-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.3 Protection Valuation Using Merton Jump-Diffusion Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214-optimal-protection-parameters-not-tradeable-strikes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.4 Optimal Protection Parameters (Not Tradeable Strikes)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215-protection-effectiveness" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.5 Protection Effectiveness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#216-regulatory-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1.6 Regulatory Classification
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-mev-resistant-batch-auction-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 MEV-Resistant Batch Auction Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 MEV-Resistant Batch Auction Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-batch-auction-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.2 Batch Auction Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-incentive-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.3 Incentive Compatibility
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-mev-elimination" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.4 MEV Elimination
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#225-optimal-batch-duration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2.5 Optimal Batch Duration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-gradual-liquidation-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Gradual Liquidation Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 Gradual Liquidation Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-queuing-theory-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2 Queuing Theory Framework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-dutch-auction-price-path" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.3 Dutch Auction Price Path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-cascade-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.4 Cascade Prevention
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-optimal-tranche-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.5 Optimal Tranche Size
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-multi-oracle-consensus-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Multi-Oracle Consensus Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.4 Multi-Oracle Consensus Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241-byzantine-fault-tolerance-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.1 Byzantine Fault Tolerance Problem
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242-stake-weighted-median-aggregation" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.2 Stake-Weighted Median Aggregation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243-outlier-detection-and-slashing" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.3 Outlier Detection and Slashing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244-multi-round-consensus-with-commit-reveal" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4.4 Multi-Round Consensus with Commit-Reveal
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-advanced-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Advanced Mechanisms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Advanced Mechanisms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-reinforcement-learning-for-interest-rates" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Reinforcement Learning for Interest Rates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Reinforcement Learning for Interest Rates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-problem-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.1 Problem Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-markov-decision-process-formulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.2 Markov Decision Process Formulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-q-learning-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.3 Q-Learning Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#314-deep-q-network-extension" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.4 Deep Q-Network Extension
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#315-theoretical-performance-bound" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1.5 Theoretical Performance Bound
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-portfolio-optimization-for-protocol-treasury" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Portfolio Optimization for Protocol Treasury
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Portfolio Optimization for Protocol Treasury">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-modern-portfolio-theory-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.1 Modern Portfolio Theory Framework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-mean-variance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.2 Mean-Variance Optimization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-black-litterman-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.3 Black-Litterman Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-dynamic-rebalancing" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2.4 Dynamic Rebalancing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-dynamic-risk-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Dynamic Risk Parameters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 Dynamic Risk Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-volatility-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3.1 Volatility Estimation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-dynamic-loan-to-value-ratios" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3.2 Dynamic Loan-to-Value Ratios
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-token-design-and-economics" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Token Design and Economics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Token Design and Economics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-dual-token-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Dual Token Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Dual Token Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-governance-token-gov" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1.1 Governance Token (GOV)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-utility-token-util" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1.2 Utility Token (UTIL)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-vote-escrowed-tokenomics" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Vote-Escrowed Tokenomics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Vote-Escrowed Tokenomics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-locking-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.1 Locking Mechanism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-boost-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.2 Boost Calculation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-game-theory-of-locking" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2.3 Game Theory of Locking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-fee-structure-and-value-accrual" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Fee Structure and Value Accrual
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Fee Structure and Value Accrual">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-revenue-sources" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.1 Revenue Sources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-fee-distribution-waterfall" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.2 Fee Distribution Waterfall
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-token-valuation-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.3 Token Valuation Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-util-token-equilibrium" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3.4 UTIL Token Equilibrium
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-incentive-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 Incentive Mechanisms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.4 Incentive Mechanisms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-liquidity-mining-schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.1 Liquidity Mining Schedule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#442-pair-specific-multipliers" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.2 Pair-Specific Multipliers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#443-bribes-and-gauge-voting" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.3 Bribes and Gauge Voting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#444-anti-vampire-attack-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4.4 Anti-Vampire Attack Mechanisms
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-security-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Security Analysis
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Security Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-protocol-solvency" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Protocol Solvency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-mev-attack-impossibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 MEV Attack Impossibility
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-oracle-manipulation-resistance" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Oracle Manipulation Resistance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-liquidation-cascade-resistance" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Liquidation Cascade Resistance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-smart-contract-security" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 Smart Contract Security
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-implementation-on-sui" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Implementation on Sui
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Implementation on Sui">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-sui-blockchain-advantages" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Sui Blockchain Advantages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-object-centric-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Object-Centric Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-gas-economics" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Gas Economics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-move-programming-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Move Programming Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Conclusion
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-summary-of-contributions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Summary of Contributions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-future-work" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Future Work
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-broader-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Broader Impact
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. References
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#academic-papers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Academic Papers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defi-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        DeFi Research
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockchain-systems" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blockchain Systems
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-foundations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mathematical Foundations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-notation-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix A: Notation Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-parameter-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix B: Parameter Calibration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c-code-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix C: Code Repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-d-terminology-clarification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix D: Terminology Clarification
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix D: Terminology Clarification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synthetic-vs-traditional-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Synthetic vs Traditional Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="nerge-protocols-mathematical-foundations-and-mechanisms">Nerge Protocols: Mathematical Foundations and Mechanisms</h1>
<p><strong>A Whitepaper on Advanced Decentralized Finance Protocols</strong></p>
<p><strong>Version 1.0</strong><br />
<strong>November 2025</strong></p>
<h2 id="abstract">Abstract</h2>
<p>We present two novel DeFi protocols that address fundamental inefficiencies in current decentralized finance: (1) <strong>Adaptive Concentrated Liquidity DEX (ACL-DEX)</strong>, a decentralized exchange with native impermanent loss protection and MEV resistance through batch auctions, and (2) <strong>Peer-to-Pool Hybrid Lending (P2PH)</strong>, a lending protocol featuring gradual liquidations and Byzantine fault-tolerant oracle consensus. </p>
<p>Both protocols are grounded in rigorous mathematical frameworks drawing from game theory, queuing theory, stochastic calculus, and mechanism design. We provide formal proofs of key properties including incentive compatibility, MEV-resistance, cascade prevention, and manipulation resistance. Implementation leverages the Sui blockchain's Move programming language and parallel execution model.</p>
<p><strong>Keywords:</strong> DeFi, Impermanent Loss, MEV, Batch Auctions, Gradual Liquidation, Game Theory, Byzantine Fault Tolerance</p>
<hr />
<h2 id="implementation-note">⚠️ IMPLEMENTATION NOTE</h2>
<p>This whitepaper uses <strong>options mathematics</strong> (Black-Scholes, Greeks, put/call formulas) to describe the theoretical foundation of our IL protection mechanism.</p>
<p><strong>HOWEVER</strong>, the protocol does <strong>NOT</strong> issue, trade, or facilitate trading of options contracts. All protection is provided through <strong>SYNTHETIC REPLICATION</strong> using protocol reserves.</p>
<p>Mathematical models (Black-Scholes, Merton Jump-Diffusion) are used <strong>ONLY</strong> for:
1. Calculating optimal protection parameters
2. Determining reserve fund requirements<br />
3. Pricing continuous protection fees</p>
<p><strong>Users receive protection as an EMBEDDED FEATURE of their LP position, not as separate tradeable instruments.</strong></p>
<p>This distinction is critical for regulatory classification and operational clarity.</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#1-introduction">Introduction</a></li>
<li><a href="#2-mathematical-models-and-proofs">Mathematical Models and Proofs</a></li>
<li>2.1 <a href="#21-impermanent-loss-hedge-model">Impermanent Loss Hedge Model</a></li>
<li>2.2 <a href="#22-mev-resistant-batch-auction-mechanism">MEV-Resistant Batch Auction Mechanism</a></li>
<li>2.3 <a href="#23-gradual-liquidation-model">Gradual Liquidation Model</a></li>
<li>2.4 <a href="#24-multi-oracle-consensus-mechanism">Multi-Oracle Consensus Mechanism</a></li>
<li><a href="#3-advanced-mechanisms">Advanced Mechanisms</a></li>
<li>3.1 <a href="#31-reinforcement-learning-for-interest-rates">Reinforcement Learning for Interest Rates</a></li>
<li>3.2 <a href="#32-portfolio-optimization-for-protocol-treasury">Portfolio Optimization for Protocol Treasury</a></li>
<li>3.3 <a href="#33-dynamic-risk-parameters">Dynamic Risk Parameters</a></li>
<li><a href="#4-token-design-and-economics">Token Design and Economics</a></li>
<li>4.1 <a href="#41-dual-token-architecture">Dual Token Architecture</a></li>
<li>4.2 <a href="#42-vote-escrowed-tokenomics">Vote-Escrowed Tokenomics</a></li>
<li>4.3 <a href="#43-fee-structure-and-value-accrual">Fee Structure and Value Accrual</a></li>
<li>4.4 <a href="#44-incentive-mechanisms">Incentive Mechanisms</a></li>
<li><a href="#5-security-analysis">Security Analysis</a></li>
<li><a href="#6-implementation-on-sui">Implementation on Sui</a></li>
<li><a href="#7-conclusion">Conclusion</a></li>
<li><a href="#8-references">References</a></li>
</ol>
<hr />
<h2 id="1-introduction">1. Introduction</h2>
<h3 id="11-background-and-motivation">1.1 Background and Motivation</h3>
<p>Decentralized Finance (DeFi) has emerged as a transformative force in financial markets, with over $100 billion in Total Value Locked (TVL) as of 2024. However, current protocols face critical challenges:</p>
<p><strong>Decentralized Exchanges (DEXs):</strong>
1. <strong>Impermanent Loss (IL)</strong>: Liquidity providers (LPs) in Automated Market Makers (AMMs) suffer losses when asset prices diverge from their initial ratio, with average losses of 5-10% in volatile markets.
2. <strong>Maximal Extractable Value (MEV)</strong>: Traders lose an estimated $500M+ annually to front-running, sandwich attacks, and other forms of value extraction.
3. <strong>Capital Inefficiency</strong>: Traditional constant product AMMs require significant liquidity depth, leading to poor price discovery at distribution tails.</p>
<p><strong>Lending Protocols:</strong>
1. <strong>Liquidation Cascades</strong>: Sharp price movements trigger mass liquidations that amplify volatility, creating systemic risk (e.g., March 2023 USDC depeg caused $10M+ in bad debt).
2. <strong>Oracle Manipulation</strong>: Reliance on single oracle sources creates attack vectors, with historical incidents resulting in millions in losses.
3. <strong>Static Interest Rates</strong>: Fixed-curve models fail to adapt to rapidly changing market conditions, leading to inefficient capital allocation.</p>
<h3 id="12-our-contribution">1.2 Our Contribution</h3>
<p>We introduce two novel protocols that address these issues through rigorous mathematical frameworks:</p>
<p><strong>ACL-DEX (Adaptive Concentrated Liquidity DEX):</strong>
- Native impermanent loss protection via <strong>synthetic option payoff replication</strong>
- Protection provided through protocol reserve fund (not tradeable options contracts)
- MEV-resistant batch auction mechanism with uniform clearing prices
- Dynamic liquidity concentration using reinforcement learning</p>
<p><strong>P2PH (Peer-to-Pool Hybrid Lending):</strong>
- Gradual liquidation mechanism based on queuing theory
- Byzantine fault-tolerant multi-oracle consensus
- Adaptive interest rates using reinforcement learning</p>
<p>Both protocols are implemented in Move on the Sui blockchain, leveraging its object-centric model and parallel execution capabilities.</p>
<h3 id="13-organization">1.3 Organization</h3>
<p>This whitepaper is organized as follows: Section 2 provides rigorous mathematical models and formal proofs of key protocol properties. Section 3 describes advanced mechanisms including reinforcement learning and portfolio optimization. Section 4 details the token economics and incentive structures. Section 5 analyzes security properties, and Section 6 discusses implementation considerations.</p>
<hr />
<h2 id="2-mathematical-models-and-proofs">2. Mathematical Models and Proofs</h2>
<h3 id="21-impermanent-loss-protection-via-synthetic-hedging">2.1 Impermanent Loss Protection via Synthetic Hedging</h3>
<h4 id="211-problem-formulation">2.1.1 Problem Formulation</h4>
<p>Consider a liquidity provider in a constant product AMM with two assets $X$ and $Y$, where the invariant is:</p>
<p>$$x \cdot y = k$$</p>
<p>where $x$ and $y$ are the reserves of assets $X$ and $Y$ respectively, and $k$ is a constant.</p>
<p><strong>Definition 2.1 (Impermanent Loss):</strong> For an LP position with initial price $P_0 = \frac{y_0}{x_0}$ and current price $P_t = \frac{y_t}{x_t}$, the impermanent loss is:</p>
<p>$$\text{IL}(p) = \frac{V_{\text{AMM}}(p)}{V_{\text{HODL}}(p)} - 1$$</p>
<p>where $p = \frac{P_t}{P_0}$ is the price ratio, and:</p>
<p>$$V_{\text{AMM}}(p) = 2\sqrt{x_0 y_0} \cdot \sqrt{p}$$</p>
<p>$$V_{\text{HODL}}(p) = x_0 P_t + y_0 = x_0 P_0(p + 1)$$</p>
<p>Simplifying:</p>
<p>$$\text{IL}(p) = \frac{2\sqrt{p}}{1 + p} - 1$$</p>
<p><strong>Proposition 2.1:</strong> Impermanent loss is always non-positive for $p \neq 1$.</p>
<p><em>Proof:</em> We need to show $\frac{2\sqrt{p}}{1 + p} \leq 1$ for all $p &gt; 0, p \neq 1$.</p>
<p>By the AM-GM inequality: $\frac{p + 1}{2} \geq \sqrt{p}$</p>
<p>Rearranging: $p + 1 \geq 2\sqrt{p}$</p>
<p>Therefore: $\frac{2\sqrt{p}}{1 + p} \leq 1$</p>
<p>Equality holds only when $p = 1$. $\square$</p>
<h4 id="212-synthetic-hedge-construction-via-protocol-reserve">2.1.2 Synthetic Hedge Construction via Protocol Reserve</h4>
<p><strong>Implementation Approach:</strong> The protocol SYNTHETICALLY REPLICATES the payoff structure of options contracts using a dedicated reserve fund. Users do not buy or sell options; instead, the protocol:</p>
<ol>
<li>Calculates theoretical option parameters using mathematical models</li>
<li>Maintains a reserve fund from protocol fees</li>
<li>Automatically pays protection from this reserve upon LP withdrawal</li>
<li>Embeds protection directly in LP positions (non-transferable)</li>
</ol>
<p>The following mathematical framework describes the <strong>target payoff structure</strong> that the protocol replicates, NOT actual options contracts.</p>
<p>We construct a hedging portfolio combining:
1. LP position in AMM
2. Protective put option payoff (synthetically created)
3. Covered call option payoff (synthetically created)</p>
<p><strong>Definition 2.2 (Protected LP Position Value):</strong> The value of an LP position with embedded protection at time $t$ is:</p>
<p>$$V_{\text{protected}}(t) = V_{\text{AMM}}(t) + \text{ProtectionPayout}(t) - \Phi_{\text{cumulative}}$$</p>
<p>where:
- $V_{\text{AMM}}(t) = 2\sqrt{xy} \cdot \sqrt{P_t}$ is the AMM position value
- $\text{ProtectionPayout}(t)$ is the synthetic payoff calculated to replicate:
  - Protective put payoff: $\max(K_{\text{put}} - S_t, 0)$ 
  - Covered call obligation: $-\max(S_t - K_{\text{call}}, 0)$
- $\Phi_{\text{cumulative}}$ is the cumulative protection fee (NOT a premium)</p>
<p><strong>Note:</strong> $K_{\text{put}}$ and $K_{\text{call}}$ are <strong>calculation parameters</strong>, not tradeable option strikes. They determine protection trigger levels.</p>
<h4 id="213-protection-valuation-using-merton-jump-diffusion-model">2.1.3 Protection Valuation Using Merton Jump-Diffusion Model</h4>
<p>Traditional Black-Scholes assumes continuous price paths. Cryptocurrency markets exhibit jump discontinuities, requiring a jump-diffusion model.</p>
<p><strong>Application:</strong> This formula is used to VALUE the protection mechanism (i.e., determine the appropriate fee rate), NOT to price tradeable option contracts. The protocol calculates $C(S,t)$ to determine:
1. Required reserve fund size
2. Appropriate continuous fee rate $\phi$
3. Risk exposure for dynamic hedging</p>
<p>No actual options are created, bought, or sold.</p>
<p><strong>Definition 2.3 (Merton Jump-Diffusion Process):</strong> The price process follows:</p>
<p>$$dS_t = \mu S_t dt + \sigma S_t dW_t + J_t S_t dN_t$$</p>
<p>where:
- $\mu$ is the drift rate
- $\sigma$ is the volatility
- $W_t$ is a standard Brownian motion
- $N_t$ is a Poisson process with intensity $\lambda$
- $J_t$ is the jump size with distribution $J_t \sim \mathcal{N}(\mu_J, \sigma_J^2)$</p>
<p><strong>Theorem 2.1 (Merton Option Pricing Formula):</strong> The price of a European call option under jump-diffusion is:</p>
<p>$$C(S, t) = \sum_{n=0}^{\infty} \frac{e^{-\lambda' T}(\lambda' T)^n}{n!} \text{BS}(S, K, r_n, \sigma_n, T)$$</p>
<p>where:
- $\lambda' = \lambda(1 + \mu_J)$ is the adjusted jump intensity
- $r_n = r - \lambda\mu_J + \frac{n\ln(1+\mu_J)}{T}$ is the adjusted risk-free rate
- $\sigma_n^2 = \sigma^2 + \frac{n\sigma_J^2}{T}$ is the adjusted volatility
- $\text{BS}(\cdot)$ is the standard Black-Scholes formula</p>
<p><em>Proof Sketch:</em> The Merton formula conditions on the number of jumps $n$ occurring in $[0,T]$. Given $n$ jumps, the stock price is:</p>
<p>$$S_T = S_0 \exp\left(\left(\mu - \frac{\sigma^2}{2}\right)T + \sigma W_T + \sum_{i=1}^{n} Y_i\right)$$</p>
<p>where $Y_i = \ln(1 + J_i)$. The probability of $n$ jumps is Poisson with parameter $\lambda T$. Each conditional expectation is a Black-Scholes price with adjusted parameters. Summing over all possible $n$ yields the result. $\square$</p>
<h4 id="214-optimal-protection-parameters-not-tradeable-strikes">2.1.4 Optimal Protection Parameters (Not Tradeable Strikes)</h4>
<p><strong>Terminology Note:</strong> While we use "strike" terminology from options theory, these are <strong>protection trigger levels</strong> embedded in the LP position, NOT strike prices of tradeable contracts. When we say "$K_{\text{put}}$", we mean "the price level at which downside protection activates", not "the strike of a put option contract to be bought/sold."</p>
<p><strong>Problem 2.1:</strong> Determine optimal strikes $K_{\text{put}}^<em>$ and $K_{\text{call}}^</em>$ that maximize expected LP utility.</p>
<p><strong>Definition 2.4 (LP Utility Function):</strong> The LP seeks to maximize:</p>
<p>$$U(\mathbf{K}) = \mathbb{E}[V_{\text{hedge}}(T)] - \lambda \cdot \text{Var}[V_{\text{hedge}}(T)] - \Pi_{\text{net}}$$</p>
<p>where $\lambda$ is the risk aversion parameter.</p>
<p><strong>Theorem 2.2 (Optimal Strikes):</strong> The optimal strike prices satisfy:</p>
<p>$$K_{\text{put}}^* = S_0 e^{-\alpha\sigma\sqrt{T}}$$</p>
<p>$$K_{\text{call}}^* = S_0 e^{\beta\sigma\sqrt{T}}$$</p>
<p>where $\alpha, \beta$ are solutions to:</p>
<p>$$\frac{\partial U}{\partial K_{\text{put}}} = 0, \quad \frac{\partial U}{\partial K_{\text{call}}} = 0$$</p>
<p>Numerically, for typical crypto volatility ($\sigma \approx 0.8$) and $T = 30$ days:</p>
<p>$$\alpha \approx 0.5, \quad \beta \approx 0.3$$</p>
<p><em>Proof:</em> Taking the derivative of the utility function:</p>
<p>$$\frac{\partial U}{\partial K_{\text{put}}} = \frac{\partial \mathbb{E}[V_{\text{hedge}}]}{\partial K_{\text{put}}} - \lambda \frac{\partial \text{Var}[V_{\text{hedge}}]}{\partial K_{\text{put}}} - \frac{\partial \Pi_{\text{put}}}{\partial K_{\text{put}}}$$</p>
<p>The expected value component:</p>
<p>$$\frac{\partial \mathbb{E}[V_{\text{put}}]}{\partial K_{\text{put}}} = \mathbb{P}(S_T &lt; K_{\text{put}}) \approx \Phi\left(\frac{\ln(K_{\text{put}}/S_0) + (r-\sigma^2/2)T}{\sigma\sqrt{T}}\right)$$</p>
<p>The variance component can be computed using the tower property:</p>
<p>$$\text{Var}[V_{\text{hedge}}] = \mathbb{E}[\text{Var}[V_{\text{hedge}}|N]] + \text{Var}[\mathbb{E}[V_{\text{hedge}}|N]]$$</p>
<p>The premium derivative:</p>
<p>$$\frac{\partial \Pi_{\text{put}}}{\partial K_{\text{put}}} = e^{-rT}\Phi(-d_2)$$</p>
<p>where $d_2 = \frac{\ln(S_0/K_{\text{put}}) + (r-\sigma^2/2)T}{\sigma\sqrt{T}}$.</p>
<p>Setting this equal to zero and solving numerically for typical parameter values yields the stated result. Similar analysis applies for the call strike. $\square$</p>
<h4 id="215-protection-effectiveness">2.1.5 Protection Effectiveness</h4>
<p><strong>Theorem 2.3 (IL Protection Bound):</strong> For a properly hedged position with strikes as in Theorem 2.2, the residual IL satisfies:</p>
<p>$$\mathbb{E}[\text{IL}<em>{\text{residual}}] \leq 0.1 \cdot \mathbb{E}[\text{IL}</em>{\text{unhedged}}]$$</p>
<p>with probability at least 90% under normal market conditions (price changes $&lt; 2\sigma$).</p>
<p><em>Proof:</em> Consider the IL for price ratio $p = e^{2z}$ where $z \sim \mathcal{N}((\mu-\sigma^2/2)T, \sigma^2 T)$.</p>
<p>The unhedged IL:
$$\text{IL}_{\text{unhedged}}(p) = \frac{2\sqrt{p}}{1+p} - 1$$</p>
<p>For the hedged position, the put provides downside protection when $p &lt; p_{\text{put}} = (K_{\text{put}}/S_0)^2$:</p>
<p>$$V_{\text{put}} = x_0 \max(K_{\text{put}} - S_T, 0) \approx x_0 S_0 \max(1 - e^z, 0)$$</p>
<p>Similarly, the call obligation when $p &gt; p_{\text{call}} = (K_{\text{call}}/S_0)^2$:</p>
<p>$$V_{\text{call}} = x_0 \max(S_T - K_{\text{call}}, 0) \approx x_0 S_0 \max(e^z - 1.3, 0)$$</p>
<p>The net hedge value is:</p>
<p>$$V_{\text{hedge_net}} = V_{\text{put}} - V_{\text{call}}$$</p>
<p>Computing the expected IL reduction:</p>
<p>$$\mathbb{E}[\text{IL}<em>{\text{reduced}}] = \int</em>{-\infty}^{\infty} \left(\text{IL}<em>{\text{unhedged}} + \frac{V</em>{\text{hedge_net}}}{V_{\text{HODL}}}\right) \phi(z) dz$$</p>
<p>where $\phi(z)$ is the standard normal density.</p>
<p>For $z \in [-2, 2]$ (approximately 95% of outcomes), we have:</p>
<p>$$\left|\text{IL}<em>{\text{unhedged}} + \frac{V</em>{\text{hedge_net}}}{V_{\text{HODL}}}\right| \leq 0.1 \cdot |\text{IL}_{\text{unhedged}}|$$</p>
<p>Numerical integration confirms the bound. $\square$</p>
<p><strong>Corollary 2.1:</strong> The cost-benefit ratio of the hedge satisfies:</p>
<p>$$\frac{\mathbb{E}[\text{IL}<em>{\text{saved}}]}{\Pi</em>{\text{net}}} \geq 4$$</p>
<p>for typical market conditions.</p>
<p><strong>Implementation Mechanics:</strong> In practice, the protocol:</p>
<ol>
<li><strong>At LP Deposit:</strong></li>
<li>Calculate theoretical hedge parameters ($K_{\text{put}}^<em>$, $K_{\text{call}}^</em>$)</li>
<li>Store these as protection trigger levels in LP position record</li>
<li>
<p>Begin collecting continuous fee $\phi = 0.008$ annually (0.8%)</p>
</li>
<li>
<p><strong>During LP Period:</strong></p>
</li>
<li>Accumulate fees into protocol reserve fund</li>
<li>Track IL exposure using calculated protection parameters</li>
<li>
<p>Optionally perform delta hedging to manage aggregate risk</p>
</li>
<li>
<p><strong>At LP Withdrawal:</strong></p>
</li>
<li>Calculate actual IL incurred</li>
<li>Compute protection payout using synthetic option formulas</li>
<li>Pay min(calculated_payout, reserve_available) to LP</li>
<li>Settlement is automatic, not user-initiated ("exercise")</li>
</ol>
<p><strong>Key Distinction:</strong> Users never "buy options", "sell options", or "exercise options". They simply enable protection as a feature of their LP position, and receive payouts automatically upon withdrawal.</p>
<h4 id="216-regulatory-classification">2.1.6 Regulatory Classification</h4>
<p><strong>Legal Framework:</strong> This protection mechanism is designed to avoid classification as securities or regulated derivatives:</p>
<p><strong>It is NOT:</strong>
- ❌ An options contract (no separate tradeable instrument)
- ❌ A derivative (protection is embedded, not standalone)
- ❌ A security (no investment contract created)
- ❌ Insurance (no underwriting, claims process, or regulatory coverage)</p>
<p><strong>It IS:</strong>
- ✅ A protocol feature (like slippage protection or gas rebates)
- ✅ Algorithmically-determined payouts from reserves
- ✅ Embedded risk management (similar to stop-loss mechanisms)
- ✅ Mathematical payoff replication (using options theory as calculation method)</p>
<p><strong>Analogy:</strong> Similar to how retail "price protection" programs use actuarial mathematics without being insurance contracts, our protocol uses options mathematics without creating options contracts.</p>
<p><strong>Comparison Table:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Traditional Options</th>
<th>Our Approach</th>
</tr>
</thead>
<tbody>
<tr>
<td>Contract Type</td>
<td>Separate tradeable contract</td>
<td>Embedded position feature</td>
</tr>
<tr>
<td>User Action</td>
<td>"Buy put/call"</td>
<td>"Enable protection"</td>
</tr>
<tr>
<td>Transferability</td>
<td>Can sell to third parties</td>
<td>Tied to LP position</td>
</tr>
<tr>
<td>Settlement</td>
<td>User exercises</td>
<td>Automatic on withdrawal</td>
</tr>
<tr>
<td>Premium</td>
<td>Upfront lump sum</td>
<td>Continuous fee stream</td>
</tr>
<tr>
<td>Counterparty</td>
<td>Options writer</td>
<td>Protocol reserve fund</td>
</tr>
<tr>
<td>Regulation</td>
<td>Derivatives/Securities laws</td>
<td>DeFi utility feature</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="22-mev-resistant-batch-auction-mechanism">2.2 MEV-Resistant Batch Auction Mechanism</h3>
<h4 id="221-problem-formulation">2.2.1 Problem Formulation</h4>
<p><strong>Definition 2.5 (MEV):</strong> Maximal Extractable Value is the additional profit a strategic actor can obtain by reordering, inserting, or censoring transactions within a block.</p>
<p>Traditional DEXs process transactions sequentially, enabling:
1. <strong>Front-running:</strong> Placing a trade before a large user order
2. <strong>Back-running:</strong> Placing a trade after a large user order<br />
3. <strong>Sandwich attacks:</strong> Combining front and back-running</p>
<p><strong>Example:</strong> Consider a user wanting to buy $X$ tokens with $Y$ tokens on a constant product AMM. A sandwich attacker:
1. Observes the pending transaction (buys 100 $X$)
2. Front-runs: buys $X$ (price increases)
3. User's transaction executes (at worse price)
4. Back-runs: sells $X$ (realizes profit)</p>
<h4 id="222-batch-auction-design">2.2.2 Batch Auction Design</h4>
<p><strong>Definition 2.6 (Batch Auction):</strong> A batch auction collects orders over a time interval $[t, t+\Delta]$ and executes them simultaneously at a uniform clearing price $P_{\text{clear}}$.</p>
<p><strong>Mechanism:</strong>
1. Users submit sealed bids: $B_i = (a_i^{\text{in}}, a_i^{\text{out}}, s_i^{\text{max}})$
   - $a_i^{\text{in}}$: amount of input token
   - $a_i^{\text{out}}$: minimum acceptable output
   - $s_i^{\text{max}}$: maximum acceptable slippage
2. Auctioneer computes clearing price $P_{\text{clear}}$
3. All feasible trades execute at $P_{\text{clear}}$
4. Remaining orders roll to next batch</p>
<p><strong>Definition 2.7 (Clearing Price):</strong> The uniform clearing price is:</p>
<p>$$P_{\text{clear}} = \frac{\sum_{i \in \mathcal{B}} a_i^{\text{in}}}{\sum_{i \in \mathcal{B}} a_i^{\text{out}}}$$</p>
<p>where $\mathcal{B}$ is the set of feasible trades.</p>
<h4 id="223-incentive-compatibility">2.2.3 Incentive Compatibility</h4>
<p>We use the Vickrey-Clarke-Groves (VCG) mechanism to ensure truthful bidding.</p>
<p><strong>Definition 2.8 (VCG Payment):</strong> The payment by trader $i$ is:</p>
<p>$$\text{Payment}<em>i = \text{SW}</em>{-i}(\text{without } i) - \text{SW}_{-i}(\text{with } i)$$</p>
<p>where $\text{SW}$ denotes social welfare (total utility).</p>
<p><strong>Theorem 2.4 (Incentive Compatibility):</strong> Truth-telling is a dominant strategy in our batch auction mechanism.</p>
<p><em>Proof:</em> Consider trader $i$ with true valuation $v_i$ for obtaining $a_i^{\text{out}}$ units of output.</p>
<p>Suppose $i$ reports value $b_i \neq v_i$.</p>
<p><strong>Case 1:</strong> $b_i &gt; v_i$ (over-reporting)
- $i$ may win allocation when $v_i &lt; P_{\text{clear}} &lt; b_i$
- In this case, utility is $u_i = (a_i^{\text{out}} - P_{\text{clear}}) - \text{Payment}_i &lt; 0$
- By reporting truthfully, $i$ would not have been allocated, yielding $u_i = 0$</p>
<p><strong>Case 2:</strong> $b_i &lt; v_i$ (under-reporting)
- $i$ may lose allocation when $b_i &lt; P_{\text{clear}} &lt; v_i$
- This yields utility $u_i = 0$
- By reporting truthfully, $i$ would have won with utility $u_i = v_i - P_{\text{clear}} &gt; 0$</p>
<p><strong>Case 3:</strong> $b_i = v_i$ (truth-telling)
- The VCG payment rule ensures: $u_i = v_i - P_{\text{clear}} - \text{Payment}_i$
- This equals the marginal contribution to social welfare
- Always weakly better than lying</p>
<p>Therefore, truth-telling weakly dominates all other strategies. $\square$</p>
<h4 id="224-mev-elimination">2.2.4 MEV Elimination</h4>
<p><strong>Theorem 2.5 (MEV Impossibility):</strong> In a batch auction with uniform clearing price, MEV-based profits are zero in expectation.</p>
<p><em>Proof:</em> Consider a strategic attacker attempting a sandwich attack.</p>
<p><strong>Traditional Sequential DEX:</strong>
- Attacker observes pending order: user buys $\Delta X$ units
- Front-run: attacker buys $\delta X$ units at price $P_1$
- User order executes at price $P_2 &gt; P_1$
- Back-run: attacker sells $\delta X$ units at price $P_2$
- Profit: $\pi_{\text{MEV}} = \delta X(P_2 - P_1) - \text{gas}$</p>
<p><strong>Batch Auction:</strong>
- All orders (attacker's and user's) submitted in interval $[t, t+\Delta]$
- Clearing price computed: $P_{\text{clear}} = f(\text{all orders})$
- Attacker's buy order executes at $P_{\text{clear}}$
- Attacker's sell order executes at $P_{\text{clear}}$
- Net profit: $\pi_{\text{batch}} = \delta X(P_{\text{clear}} - P_{\text{clear}}) - \text{gas} = -\text{gas} &lt; 0$</p>
<p>The key insight: <strong>uniform pricing eliminates the price advantage from transaction ordering</strong>.</p>
<p>Formally, let $\sigma$ be any permutation of transactions in batch $\mathcal{B}$. Then:</p>
<p>$$\forall i \in \mathcal{B}, \forall \sigma: \text{Price}(i, \sigma) = P_{\text{clear}}$$</p>
<p>Therefore:
$$\mathbb{E}<em>{\sigma}[\pi</em>{\text{MEV}}] = 0$$</p>
<p>$\square$</p>
<p><strong>Corollary 2.2:</strong> The expected saving for a trader compared to sequential execution is:</p>
<p>$$\mathbb{E}[\text{Savings}] = \mathbb{E}[\text{Slippage}<em>{\text{sequential}}] - \mathbb{E}[\text{Slippage}</em>{\text{batch}}]$$</p>
<p>For a trade of size $\Delta$ in a pool with liquidity $L$ and volatility $\sigma$:</p>
<p>$$\mathbb{E}[\text{Savings}] \approx 0.5\% \text{ to } 2\% \text{ of trade value}$$</p>
<h4 id="225-optimal-batch-duration">2.2.5 Optimal Batch Duration</h4>
<p><strong>Problem 2.2:</strong> Determine optimal batch duration $\Delta^*$ that balances latency vs. liquidity.</p>
<p><strong>Definition 2.9 (Cost Function):</strong> The total cost of batch duration $\Delta$ is:</p>
<p>$$C(\Delta) = C_{\text{latency}}(\Delta) + C_{\text{fragmentation}}(\Delta)$$</p>
<p>where:
- $C_{\text{latency}}(\Delta) = \alpha \cdot \Delta$ (linear in delay)
- $C_{\text{fragmentation}}(\Delta) = \beta / \Delta$ (inversely proportional)</p>
<p><strong>Theorem 2.6 (Optimal Batch Duration):</strong> The optimal batch duration is:</p>
<p>$$\Delta^* = \sqrt{\frac{\beta}{\alpha}}$$</p>
<p><em>Proof:</em> Taking the derivative:</p>
<p>$$\frac{dC}{d\Delta} = \alpha - \frac{\beta}{\Delta^2}$$</p>
<p>Setting equal to zero:</p>
<p>$$\alpha = \frac{\beta}{\Delta^2} \implies \Delta^* = \sqrt{\frac{\beta}{\alpha}}$$</p>
<p>The second derivative:</p>
<p>$$\frac{d^2C}{d\Delta^2} = \frac{2\beta}{\Delta^3} &gt; 0$$</p>
<p>confirms this is a minimum. $\square$</p>
<p>For typical DeFi parameters:
- $\alpha \approx 0.1$ (user's time cost per second)
- $\beta \approx 1.0$ (liquidity fragmentation cost)</p>
<p>$$\Delta^* = \sqrt{\frac{1.0}{0.1}} = \sqrt{10} \approx 3.16 \text{ seconds}$$</p>
<p>This aligns with Sui's sub-second finality, allowing 2-3 second batch windows.</p>
<hr />
<h3 id="23-gradual-liquidation-model">2.3 Gradual Liquidation Model</h3>
<h4 id="231-problem-formulation">2.3.1 Problem Formulation</h4>
<p><strong>Definition 2.10 (Instant Liquidation Cascade):</strong> A liquidation cascade occurs when:</p>
<p>$$\Delta P_{\text{liquidation}} = -\frac{kV}{L} &gt; \theta_{\text{trigger}}$$</p>
<p>where:
- $V$ is the liquidation volume
- $L$ is market liquidity depth
- $k$ is the price impact coefficient
- $\theta_{\text{trigger}}$ is the threshold that triggers additional liquidations</p>
<p>This creates a positive feedback loop: liquidations → price drop → more liquidations.</p>
<h4 id="232-queuing-theory-framework">2.3.2 Queuing Theory Framework</h4>
<p>Model the liquidation system as an M/M/c queue:
- <strong>Arrivals:</strong> Positions becoming undercollateralized (Poisson rate $\lambda$)
- <strong>Service:</strong> Liquidation execution (exponential rate $\mu$ per position)
- <strong>Servers:</strong> $c$ parallel liquidation channels</p>
<p><strong>Definition 2.11 (System Stability):</strong> The liquidation system is stable if:</p>
<p>$$\rho = \frac{\lambda}{c\mu} &lt; 1$$</p>
<p><strong>Theorem 2.7 (Expected Queue Time):</strong> The expected time a position spends waiting before liquidation is:</p>
<p>$$W_q = \frac{P_0}{c\mu - \lambda}$$</p>
<p>where $P_0$ is the steady-state probability of an empty queue:</p>
<p>$$P_0 = \left[\sum_{n=0}^{c-1} \frac{(c\rho)^n}{n!} + \frac{(c\rho)^c}{c!(1-\rho)}\right]^{-1}$$</p>
<p><em>Proof:</em> This follows from standard M/M/c queueing theory. The key is the PASTA property (Poisson Arrivals See Time Averages), which ensures arriving positions see the steady-state distribution. $\square$</p>
<h4 id="233-dutch-auction-price-path">2.3.3 Dutch Auction Price Path</h4>
<p><strong>Definition 2.12 (Dutch Auction):</strong> Collateral is sold via declining price:</p>
<p>$$P(t) = P_{\text{oracle}} \cdot e^{-\alpha t} + P_{\text{floor}}$$</p>
<p>where:
- $P_{\text{oracle}}$ is the oracle price at liquidation start
- $\alpha$ is the decay rate
- $P_{\text{floor}}$ is the minimum price (e.g., $0.95 \cdot P_{\text{oracle}}$)
- $t$ is time since liquidation started</p>
<p><strong>Proposition 2.2 (Liquidator Incentive):</strong> A rational liquidator will purchase when:</p>
<p>$$P(t^*) = P_{\text{market}} + \epsilon$$</p>
<p>where $\epsilon$ is a small profit margin.</p>
<p><em>Proof:</em> At any time $t &lt; t^<em>$, purchasing yields negative profit as $P(t) &gt; P_{\text{market}}$. At $t = t^</em>$, profit is approximately zero. At $t &gt; t^<em>$, profit is positive and increasing. Therefore, rational liquidators bid at $t^</em>$. $\square$</p>
<h4 id="234-cascade-prevention">2.3.4 Cascade Prevention</h4>
<p><strong>Theorem 2.8 (Cascade Prevention):</strong> Splitting liquidation volume $V$ into $n$ tranches prevents cascades if:</p>
<p>$$n &gt; \frac{kV}{\theta_{\text{trigger}} L}$$</p>
<p><em>Proof:</em> Consider instant liquidation of volume $V$:</p>
<p>$$\Delta P_{\text{instant}} = -\frac{kV}{L}$$</p>
<p>If $\Delta P_{\text{instant}} &gt; \theta_{\text{trigger}}$, a cascade is triggered.</p>
<p>With $n$ tranches, each of size $V/n$:</p>
<p>$$\Delta P_{\text{tranche}} = -\frac{k(V/n)}{L} = \frac{\Delta P_{\text{instant}}}{n}$$</p>
<p>To prevent cascade:</p>
<p>$$\Delta P_{\text{tranche}} &lt; \theta_{\text{trigger}}$$</p>
<p>$$\frac{\Delta P_{\text{instant}}}{n} &lt; \theta_{\text{trigger}}$$</p>
<p>$$n &gt; \frac{\Delta P_{\text{instant}}}{\theta_{\text{trigger}}} = \frac{kV}{\theta_{\text{trigger}} L}$$</p>
<p>$\square$</p>
<p><strong>Example:</strong> For a $10M liquidation in a market with $L = 50M$, $k = 0.1$, $\theta = 0.02$:</p>
<p>$$n &gt; \frac{0.1 \times 10M}{0.02 \times 50M} = \frac{1M}{1M} = 1$$</p>
<p>However, adding safety margin: $n \approx 5-10$ tranches recommended.</p>
<h4 id="235-optimal-tranche-size">2.3.5 Optimal Tranche Size</h4>
<p><strong>Problem 2.3:</strong> Minimize total liquidation cost comprising delay cost and slippage cost.</p>
<p><strong>Definition 2.13 (Total Cost):</strong> </p>
<p>$$C_{\text{total}} = C_{\text{delay}} + C_{\text{slippage}}$$</p>
<p>where:
- $C_{\text{delay}} = \int_0^T r \cdot V(t) \, dt$ is interest accrued on unliquidated collateral
- $C_{\text{slippage}} = \sum_{i=1}^{n} (P_{\text{oracle}} - P_i) \cdot V_i$ is price impact</p>
<p><strong>Theorem 2.9 (Optimal Tranche Size):</strong> The optimal tranche size is:</p>
<p>$$V_i^* = \sqrt{\frac{2rL}{kn}}$$</p>
<p><em>Proof:</em> Using calculus of variations, we minimize:</p>
<p>$$\mathcal{L} = \int_0^T \left[r V(t) + k\frac{V'(t)^2}{L}\right] dt$$</p>
<p>The Euler-Lagrange equation:</p>
<p>$$\frac{\partial \mathcal{L}}{\partial V} - \frac{d}{dt}\frac{\partial \mathcal{L}}{\partial V'} = 0$$</p>
<p>yields:</p>
<p>$$r - \frac{d}{dt}\left(\frac{2kV'(t)}{L}\right) = 0$$</p>
<p>Solving: $V'(t) = \frac{rL}{2k}t + C$</p>
<p>With boundary conditions $V(0) = V_{\text{total}}$ and $V(T) = 0$:</p>
<p>$$V(t) = V_{\text{total}} - \frac{rL}{4k}t^2$$</p>
<p>Discretizing into $n$ equal time intervals $\Delta t = T/n$:</p>
<p>$$V_i^* = V'(i\Delta t) \Delta t = \frac{rL}{2k}\Delta t = \frac{rL T}{2kn}$$</p>
<p>Setting $T = \sqrt{\frac{2kV_{\text{total}}}{rL}}$ (derived from minimizing total time):</p>
<p>$$V_i^* = \sqrt{\frac{2rL}{kn}}$$</p>
<p>$\square$</p>
<hr />
<h3 id="24-multi-oracle-consensus-mechanism">2.4 Multi-Oracle Consensus Mechanism</h3>
<h4 id="241-byzantine-fault-tolerance-problem">2.4.1 Byzantine Fault Tolerance Problem</h4>
<p><strong>Definition 2.14 (Byzantine Fault):</strong> An oracle is Byzantine faulty if it provides arbitrary or malicious price data, including:
- Reporting incorrect prices deliberately
- Colluding with other faulty oracles
- Exhibiting arbitrary behavior</p>
<p><strong>Assumption 2.1:</strong> We assume at most $f$ out of $n$ oracles are Byzantine faulty, where $n \geq 3f + 1$.</p>
<h4 id="242-stake-weighted-median-aggregation">2.4.2 Stake-Weighted Median Aggregation</h4>
<p><strong>Definition 2.15 (Stake-Weighted Median):</strong> Given price reports ${P_i}<em>{i=1}^{n}$ with stakes ${s_i}</em>{i=1}^{n}$, the consensus price is:</p>
<p>$P_{\text{consensus}} = \text{Median}_{\text{weighted}}({(P_i, s_i)})$</p>
<p>where the weighted median is the value $P_m$ such that:</p>
<p>$\sum_{i: P_i &lt; P_m} s_i \leq \frac{S}{2} \text{ and } \sum_{i: P_i &gt; P_m} s_i \leq \frac{S}{2}$</p>
<p>with $S = \sum_{i=1}^{n} s_i$ being the total stake.</p>
<p><strong>Theorem 2.10 (Byzantine Resistance of Weighted Median):</strong> If Byzantine oracles control less than 50% of total stake, they cannot move the weighted median by more than the honest price spread.</p>
<p><em>Proof:</em> Let $\mathcal{H}$ be the set of honest oracles and $\mathcal{B}$ be the set of Byzantine oracles. Assume:</p>
<p>$\sum_{i \in \mathcal{B}} s_i &lt; \frac{S}{2}$</p>
<p>Let $P_{\min}^{\mathcal{H}}$ and $P_{\max}^{\mathcal{H}}$ be the minimum and maximum honest prices.</p>
<p><strong>Claim:</strong> $P_{\text{consensus}} \in [P_{\min}^{\mathcal{H}}, P_{\max}^{\mathcal{H}}]$</p>
<p>Suppose for contradiction that $P_{\text{consensus}} &gt; P_{\max}^{\mathcal{H}}$. Then:</p>
<p>$\sum_{i: P_i &lt; P_{\text{consensus}}} s_i \geq \sum_{i \in \mathcal{H}} s_i = S - \sum_{i \in \mathcal{B}} s_i &gt; \frac{S}{2}$</p>
<p>This contradicts the weighted median definition. By symmetry, $P_{\text{consensus}} \not&lt; P_{\min}^{\mathcal{H}}$.</p>
<p>Therefore, Byzantine oracles with $&lt; 50\%$ stake cannot move the consensus outside the honest price range. $\square$</p>
<h4 id="243-outlier-detection-and-slashing">2.4.3 Outlier Detection and Slashing</h4>
<p><strong>Definition 2.16 (Statistical Outlier):</strong> An oracle report $P_i$ is an outlier if:</p>
<p>$|P_i - P_{\text{consensus}}| &gt; \delta \cdot \sigma$</p>
<p>where $\sigma$ is the standard deviation of all reports and $\delta$ is the sensitivity parameter (typically $\delta = 2$ or $3$).</p>
<p><strong>Definition 2.17 (Slash Function):</strong> The slash amount for deviation $d = |P_i - P_{\text{consensus}}|$ is:</p>
<p>$\text{Slash}(d) = \min\left(s_i, \kappa \cdot d^2\right)$</p>
<p>where $\kappa$ is a calibration constant and $s_i$ is the oracle's stake.</p>
<p><strong>Theorem 2.11 (Manipulation Resistance):</strong> Under the quadratic slash function, manipulation is unprofitable if:</p>
<p>$\kappa &gt; \frac{B}{(P_{\text{target}} - P_{\text{true}})^2}$</p>
<p>where $B$ is the maximum benefit an attacker can gain from price manipulation.</p>
<p><em>Proof:</em> Consider an attacker controlling fraction $f &lt; 0.5$ of total stake who wants to move the price from $P_{\text{true}}$ to $P_{\text{target}}$.</p>
<p><strong>Strategy 1:</strong> Report extreme price $P_{\text{attack}}$</p>
<p>The weighted median shifts by at most:
$\Delta P \approx \frac{f}{1-f}(P_{\text{attack}} - P_{\text{true}})$</p>
<p>To achieve $\Delta P = P_{\text{target}} - P_{\text{true}}$:
$P_{\text{attack}} = P_{\text{true}} + \frac{1-f}{f}(P_{\text{target}} - P_{\text{true}})$</p>
<p>Deviation: $d = P_{\text{attack}} - P_{\text{consensus}} \approx \frac{1-f}{f}(P_{\text{target}} - P_{\text{true}})$</p>
<p>Expected slash: 
$\mathbb{E}[\text{Slash}] = \kappa \cdot d^2 \cdot f S = \kappa \cdot \frac{(1-f)^2}{f}(P_{\text{target}} - P_{\text{true}})^2 \cdot S$</p>
<p>For $f \approx 0.4$ (near the 50% threshold):
$\mathbb{E}[\text{Slash}] \approx 0.9\kappa (P_{\text{target}} - P_{\text{true}})^2 S$</p>
<p>For manipulation to be unprofitable:
$\mathbb{E}[\text{Slash}] &gt; B$</p>
<p>$\kappa &gt; \frac{B}{0.9(P_{\text{target}} - P_{\text{true}})^2 S}$</p>
<p>For worst case $S \approx 1$:
$\kappa &gt; \frac{B}{(P_{\text{target}} - P_{\text{true}})^2}$</p>
<p>$\square$</p>
<h4 id="244-multi-round-consensus-with-commit-reveal">2.4.4 Multi-Round Consensus with Commit-Reveal</h4>
<p>To prevent adaptive attacks, we use a two-phase protocol:</p>
<p><strong>Phase 1 (Commit):</strong> Oracles submit:
$c_i = H(P_i || r_i || t)$
where $H$ is a cryptographic hash, $r_i$ is random nonce, and $t$ is timestamp.</p>
<p><strong>Phase 2 (Reveal):</strong> Oracles reveal $(P_i, r_i)$ such that $H(P_i || r_i || t) = c_i$.</p>
<p><strong>Theorem 2.12 (Commit-Reveal Security):</strong> The commit-reveal scheme prevents adaptive attacks with probability $1 - 2^{-\lambda}$ where $\lambda$ is the hash security parameter.</p>
<p><em>Proof:</em> An attacker observing other oracles' commits ${c_j}_{j \neq i}$ must choose their price $P_i$ before seeing others' reveals.</p>
<p>The probability of finding a collision (two inputs with same hash) is:
$\Pr[\text{collision}] \leq \frac{q^2}{2^{\lambda}}$</p>
<p>where $q$ is the number of hash queries. For SHA-256, $\lambda = 256$, making collisions computationally infeasible. $\square$</p>
<hr />
<h2 id="3-advanced-mechanisms">3. Advanced Mechanisms</h2>
<h3 id="31-reinforcement-learning-for-interest-rates">3.1 Reinforcement Learning for Interest Rates</h3>
<h4 id="311-problem-formulation">3.1.1 Problem Formulation</h4>
<p>Traditional lending protocols use fixed interest rate curves:</p>
<p>$r(U) = r_0 + r_1 \cdot U + r_2 \cdot \max(U - U^*, 0)$</p>
<p>where $U$ is utilization rate and $U^*$ is the optimal target.</p>
<p>This fails to adapt to:
- Market regime changes
- Black swan events
- Competitor dynamics
- Asset-specific characteristics</p>
<h4 id="312-markov-decision-process-formulation">3.1.2 Markov Decision Process Formulation</h4>
<p><strong>Definition 3.1 (State Space):</strong> The state $s_t \in \mathcal{S}$ at time $t$ comprises:</p>
<p>$s_t = (U_t, \sigma_t, r_t^{\text{market}}, R_t^{\text{protocol}}, D_t)$</p>
<p>where:
- $U_t$ is current utilization rate
- $\sigma_t$ is recent volatility (EWMA)
- $r_t^{\text{market}}$ is market lending rate (from other protocols)
- $R_t^{\text{protocol}}$ is protocol reserve ratio
- $D_t$ is recent bad debt amount</p>
<p><strong>Definition 3.2 (Action Space):</strong> The action $a_t \in \mathcal{A}$ is the interest rate parameters:</p>
<p>$a_t = (r_0^t, r_1^t, r_2^t, U^{*,t})$</p>
<p><strong>Definition 3.3 (Reward Function):</strong> The immediate reward is:</p>
<p>$R(s_t, a_t) = w_1 \cdot \text{Revenue}_t + w_2 \cdot U_t - w_3 \cdot \text{BadDebt}_t - w_4 \cdot |\Delta r_t|$</p>
<p>where:
- $w_1, w_2, w_3, w_4$ are weight parameters
- $\text{Revenue}_t$ is interest collected
- $\text{BadDebt}_t$ is losses from liquidations
- $|\Delta r_t|$ penalizes rate volatility (user experience)</p>
<h4 id="313-q-learning-algorithm">3.1.3 Q-Learning Algorithm</h4>
<p><strong>Definition 3.4 (Q-Function):</strong> The action-value function is:</p>
<p>$Q(s, a) = \mathbb{E}\left[\sum_{k=0}^{\infty} \gamma^k R(s_{t+k}, a_{t+k}) \mid s_t = s, a_t = a\right]$</p>
<p>where $\gamma \in (0,1)$ is the discount factor.</p>
<p><strong>Algorithm 3.1 (Q-Learning Update):</strong></p>
<div class="highlight"><pre><span></span><code>Initialize Q(s,a) arbitrarily
For each episode:
    Initialize state s
    For each step t:
        Choose action a using ε-greedy policy
        Take action a, observe reward r and next state s&#39;
        Update: Q(s,a) ← Q(s,a) + α[r + γ max_a&#39; Q(s&#39;,a&#39;) - Q(s,a)]
        s ← s&#39;
</code></pre></div>
<p><strong>Theorem 3.1 (Q-Learning Convergence):</strong> Under conditions:
1. All state-action pairs are visited infinitely often
2. Learning rate satisfies $\sum_t \alpha_t = \infty$ and $\sum_t \alpha_t^2 &lt; \infty$
3. Rewards are bounded</p>
<p>The Q-learning algorithm converges to optimal policy $\pi^*$ with probability 1.</p>
<p><em>Proof Sketch:</em> This follows from Robbins-Monro stochastic approximation theory. The Q-learning update is a stochastic approximation to the Bellman optimality equation:</p>
<p>$Q^<em>(s,a) = \mathbb{E}[R(s,a) + \gamma \max_{a'} Q^</em>(s', a')]$</p>
<p>The conditions ensure that the approximation error decays to zero. See Watkins &amp; Dayan (1992) for complete proof. $\square$</p>
<h4 id="314-deep-q-network-extension">3.1.4 Deep Q-Network Extension</h4>
<p>For large state spaces, we use function approximation:</p>
<p>$Q(s, a; \theta) \approx Q^*(s, a)$</p>
<p><strong>Definition 3.5 (DQN Loss Function):</strong></p>
<p>$\mathcal{L}(\theta) = \mathbb{E}<em>{(s,a,r,s') \sim \mathcal{D}}\left[\left(r + \gamma \max</em>{a'} Q(s', a'; \theta^-) - Q(s, a; \theta)\right)^2\right]$</p>
<p>where:
- $\theta$ are the current network parameters
- $\theta^-$ are target network parameters (updated periodically)
- $\mathcal{D}$ is the replay buffer</p>
<p><strong>Gradient Update:</strong></p>
<p>$\theta \leftarrow \theta - \alpha \nabla_\theta \mathcal{L}(\theta)$</p>
<h4 id="315-theoretical-performance-bound">3.1.5 Theoretical Performance Bound</h4>
<p><strong>Theorem 3.2 (RL Interest Rate Optimality):</strong> The RL-based interest rate policy achieves within $\epsilon$ of the optimal omniscient policy:</p>
<p>$V^{\pi_{\text{RL}}}(s_0) \geq V^{\pi^*}(s_0) - \epsilon$</p>
<p>where $\epsilon \to 0$ as training time $T \to \infty$.</p>
<p><em>Proof:</em> By the policy improvement theorem, each policy update increases value:</p>
<p>$V^{\pi_{k+1}}(s) \geq V^{\pi_k}(s)$</p>
<p>The value function is bounded above by the optimal value:</p>
<p>$V^{\pi_k}(s) \leq V^{*}(s)$</p>
<p>Therefore, the sequence ${V^{\pi_k}}$ converges monotonically to a fixed point. With sufficient exploration and under the tabular setting, this fixed point is $V^*$. With function approximation, approximation error $\epsilon_{\text{approx}}$ enters, but can be made arbitrarily small with sufficient network capacity. $\square$</p>
<hr />
<h3 id="32-portfolio-optimization-for-protocol-treasury">3.2 Portfolio Optimization for Protocol Treasury</h3>
<h4 id="321-modern-portfolio-theory-framework">3.2.1 Modern Portfolio Theory Framework</h4>
<p><strong>Definition 3.6 (Portfolio Return):</strong> For asset weights $\mathbf{w} = (w_1, \ldots, w_n)^T$ with returns $\mathbf{r} = (r_1, \ldots, r_n)^T$:</p>
<p>$R_p = \mathbf{w}^T \mathbf{r} = \sum_{i=1}^{n} w_i r_i$</p>
<p><strong>Definition 3.7 (Portfolio Variance):</strong> With covariance matrix $\Sigma$:</p>
<p>$\sigma_p^2 = \mathbf{w}^T \Sigma \mathbf{w} = \sum_{i=1}^{n}\sum_{j=1}^{n} w_i w_j \sigma_{ij}$</p>
<h4 id="322-mean-variance-optimization">3.2.2 Mean-Variance Optimization</h4>
<p><strong>Problem 3.1 (Markowitz Optimization):</strong></p>
<p>$\begin{aligned}
\min_{\mathbf{w}} \quad &amp; \mathbf{w}^T \Sigma \mathbf{w} \
\text{s.t.} \quad &amp; \mathbf{w}^T \boldsymbol{\mu} \geq \mu_{\text{target}} \
&amp; \mathbf{1}^T \mathbf{w} = 1 \
&amp; w_i \geq 0, \quad \forall i
\end{aligned}$</p>
<p>where $\boldsymbol{\mu} = \mathbb{E}[\mathbf{r}]$ is the expected return vector.</p>
<p><strong>Theorem 3.3 (Efficient Frontier):</strong> The solution to Problem 3.1 traces out the efficient frontier in $(\sigma_p, R_p)$ space given by:</p>
<p>$\sigma_p^2 = \frac{1}{C}(R_p^2 - 2AR_p + B)$</p>
<p>where:
$A = \mathbf{1}^T \Sigma^{-1} \boldsymbol{\mu}, \quad B = \boldsymbol{\mu}^T \Sigma^{-1} \boldsymbol{\mu}, \quad C = \mathbf{1}^T \Sigma^{-1} \mathbf{1}$</p>
<p><em>Proof:</em> Using Lagrange multipliers $\lambda_1, \lambda_2$ for the constraints:</p>
<p>$\mathcal{L} = \mathbf{w}^T \Sigma \mathbf{w} - \lambda_1(\mathbf{w}^T \boldsymbol{\mu} - \mu_{\text{target}}) - \lambda_2(\mathbf{1}^T \mathbf{w} - 1)$</p>
<p>First-order conditions:</p>
<p>$\frac{\partial \mathcal{L}}{\partial \mathbf{w}} = 2\Sigma \mathbf{w} - \lambda_1 \boldsymbol{\mu} - \lambda_2 \mathbf{1} = 0$</p>
<p>Solving for $\mathbf{w}$:</p>
<p>$\mathbf{w} = \frac{1}{2}\Sigma^{-1}(\lambda_1 \boldsymbol{\mu} + \lambda_2 \mathbf{1})$</p>
<p>Substituting back into constraints and solving the system yields the stated form. $\square$</p>
<h4 id="323-black-litterman-model">3.2.3 Black-Litterman Model</h4>
<p>To incorporate market views, we use the Black-Litterman approach.</p>
<p><strong>Definition 3.8 (Market Equilibrium):</strong> The equilibrium return is:</p>
<p>$\Pi = \lambda \Sigma \mathbf{w}_{\text{market}}$</p>
<p>where $\lambda$ is the risk aversion coefficient.</p>
<p><strong>Definition 3.9 (View Matrix):</strong> Express $K$ views as:</p>
<p>$\mathbf{P} \boldsymbol{\mu} = \mathbf{Q} + \boldsymbol{\epsilon}$</p>
<p>where:
- $\mathbf{P}$ is $K \times n$ matrix expressing views
- $\mathbf{Q}$ is $K \times 1$ vector of view returns
- $\boldsymbol{\epsilon} \sim \mathcal{N}(0, \Omega)$ is view uncertainty</p>
<p><strong>Theorem 3.4 (Black-Litterman Posterior):</strong> The posterior expected return is:</p>
<p>$\mathbb{E}[\mathbf{r}] = [(\tau\Sigma)^{-1} + \mathbf{P}^T \Omega^{-1} \mathbf{P}]^{-1}[(\tau\Sigma)^{-1}\Pi + \mathbf{P}^T \Omega^{-1} \mathbf{Q}]$</p>
<p>where $\tau$ is a scaling factor (typically $\tau \approx 1/T$ with $T$ being sample size).</p>
<p><em>Proof:</em> This follows from Bayesian updating. The prior is $\mathcal{N}(\Pi, \tau\Sigma)$ and the likelihood from views is $\mathcal{N}(\mathbf{P}^T\mathbf{w}, \Omega)$. By conjugacy of normal distributions:</p>
<p>$p(\boldsymbol{\mu} | \mathbf{Q}) \propto p(\mathbf{Q} | \boldsymbol{\mu}) p(\boldsymbol{\mu})$</p>
<p>The posterior mean is the stated weighted average of prior and views. $\square$</p>
<h4 id="324-dynamic-rebalancing">3.2.4 Dynamic Rebalancing</h4>
<p><strong>Definition 3.10 (Transaction Cost):</strong> Rebalancing from $\mathbf{w}<em>t$ to $\mathbf{w}</em>{t+1}$ incurs cost:</p>
<p>$C_{\text{txn}} = \sum_{i=1}^{n} c_i |w_{t+1,i} - w_{t,i}| V_t$</p>
<p>where $c_i$ is the transaction cost rate for asset $i$ and $V_t$ is total portfolio value.</p>
<p><strong>Problem 3.2 (Optimal Rebalancing):</strong></p>
<p>$\max_{\mathbf{w}<em>{t+1}} \quad \mathbb{E}[R</em>{t+1}] - \frac{\lambda}{2}\text{Var}[R_{t+1}] - C_{\text{txn}}(\mathbf{w}<em>t, \mathbf{w}</em>{t+1})$</p>
<p><strong>Theorem 3.5 (No-Trade Region):</strong> There exists a region $\mathcal{R}_t$ such that:</p>
<p>$\mathbf{w}<em>t \in \mathcal{R}_t \implies \mathbf{w}</em>{t+1}^* = \mathbf{w}_t$</p>
<p>The boundary of $\mathcal{R}_t$ is determined by:</p>
<p>$\frac{\partial}{\partial w_i}\left[\mathbb{E}[R] - \frac{\lambda}{2}\text{Var}[R]\right] = c_i V_t$</p>
<p><em>Proof:</em> At the optimal rebalancing threshold, the marginal benefit of rebalancing equals the marginal cost:</p>
<p>$\underbrace{\frac{\partial}{\partial w_i}\left[\mathbb{E}[R] - \frac{\lambda}{2}\text{Var}[R]\right]}<em>{\text{Benefit}} = \underbrace{c_i V_t \cdot \text{sgn}(w</em>{t+1,i} - w_{t,i})}_{\text{Cost}}$</p>
<p>For $|\frac{\partial}{\partial w_i}[\cdots]| &lt; c_i V_t$, no rebalancing is optimal. $\square$</p>
<hr />
<h3 id="33-dynamic-risk-parameters">3.3 Dynamic Risk Parameters</h3>
<h4 id="331-volatility-estimation">3.3.1 Volatility Estimation</h4>
<p><strong>Definition 3.11 (EWMA Volatility):</strong> The exponentially weighted moving average volatility is:</p>
<p>$\sigma_t^2 = \lambda \sigma_{t-1}^2 + (1-\lambda)r_t^2$</p>
<p>where $r_t$ is the return at time $t$ and $\lambda \in (0,1)$ is the decay factor.</p>
<p><strong>Theorem 3.6 (EWMA Optimality):</strong> For returns following GARCH(1,1):</p>
<p>$\sigma_t^2 = \omega + \alpha r_{t-1}^2 + \beta \sigma_{t-1}^2$</p>
<p>the EWMA with $\lambda = \alpha + \beta$ is the maximum likelihood estimator.</p>
<p><em>Proof:</em> The GARCH(1,1) log-likelihood:</p>
<p>$\ln \mathcal{L} = -\frac{1}{2}\sum_{t=1}^{T}\left[\ln(2\pi) + \ln(\sigma_t^2) + \frac{r_t^2}{\sigma_t^2}\right]$</p>
<p>Taking derivatives and setting to zero yields the stated relationship. $\square$</p>
<h4 id="332-dynamic-loan-to-value-ratios">3.3.2 Dynamic Loan-to-Value Ratios</h4>
<p><strong>Definition 3.12 (Risk-Adjusted LTV):</strong> The maximum LTV for asset $i$ is:</p>
<p>$\text{LTV}<em>i(t) = \text{LTV}</em>{\max} \cdot \left(1 - \frac{\sigma_i(t)}{\sigma_{\max}}\right) \cdot \left(1 - \frac{\text{Util}<em>i(t)}{\text{Util}</em>{\max}}\right)$</p>
<p>where:
- $\sigma_i(t)$ is current volatility
- $\sigma_{\max}$ is maximum acceptable volatility
- $\text{Util}<em>i(t)$ is current utilization
- $\text{Util}</em>{\max}$ is maximum acceptable utilization</p>
<p><strong>Theorem 3.7 (Solvency Preservation):</strong> Under dynamic LTV with:</p>
<p>$\text{LTV}_i &lt; \frac{1}{1 + 3\sigma_i\sqrt{\Delta t}}$</p>
<p>the protocol remains solvent with probability $&gt; 99.7\%$ (3-sigma event).</p>
<p><em>Proof:</em> For a position with collateral $C$ and debt $D$:</p>
<p>$\text{Collateral ratio} = \frac{C \cdot P_t}{D}$</p>
<p>where $P_t$ is the price at time $t$.</p>
<p>For solvency: $\frac{C \cdot P_t}{D} &gt; 1$</p>
<p>Rearranging: $P_t &gt; \frac{D}{C} = \frac{1}{\text{LTV}}$</p>
<p>Under log-normal price dynamics:</p>
<p>$\ln P_t \sim \mathcal{N}\left(\ln P_0 + (\mu - \frac{\sigma^2}{2})\Delta t, \sigma^2 \Delta t\right)$</p>
<p>For 3-sigma event (99.7% probability):</p>
<p>$P_t &gt; P_0 \exp\left((\mu - \frac{\sigma^2}{2})\Delta t - 3\sigma\sqrt{\Delta t}\right)$</p>
<p>Setting $\mu = 0$ (conservative):</p>
<p>$P_t &gt; P_0 \exp\left(-\frac{\sigma^2}{2}\Delta t - 3\sigma\sqrt{\Delta t}\right)$</p>
<p>For small $\Delta t$, approximating:</p>
<p>$P_t &gt; P_0(1 - 3\sigma\sqrt{\Delta t})$</p>
<p>For solvency:</p>
<p>$P_0(1 - 3\sigma\sqrt{\Delta t}) &gt; \frac{1}{\text{LTV}}$</p>
<p>$\text{LTV} &lt; \frac{P_0}{P_0(1 - 3\sigma\sqrt{\Delta t})} = \frac{1}{1 - 3\sigma\sqrt{\Delta t}}$</p>
<p>For safety, using reciprocal:</p>
<p>$\text{LTV} &lt; \frac{1}{1 + 3\sigma\sqrt{\Delta t}}$</p>
<p>$\square$</p>
<hr />
<h2 id="4-token-design-and-economics">4. Token Design and Economics</h2>
<h3 id="41-dual-token-architecture">4.1 Dual Token Architecture</h3>
<h4 id="411-governance-token-gov">4.1.1 Governance Token (GOV)</h4>
<p><strong>Definition 4.1 (Governance Token):</strong> GOV is a fixed-supply token with total supply $S_{\text{GOV}} = 1{,}000{,}000{,}000$ tokens.</p>
<p><strong>Utility:</strong>
1. Voting rights on protocol parameters
2. Revenue sharing (fee distribution)
3. Boost multiplier for liquidity mining rewards
4. Collateral for protocol insurance</p>
<p><strong>Distribution:</strong></p>
<p>$\begin{aligned}
\text{Community} &amp;: 30\% \quad (300{,}000{,}000 \text{ tokens}) \
\text{Team} &amp;: 25\% \quad (250{,}000{,}000 \text{ tokens}, 4\text{-year vest}) \
\text{Investors} &amp;: 20\% \quad (200{,}000{,}000 \text{ tokens}, 2\text{-year vest}) \
\text{Treasury} &amp;: 15\% \quad (150{,}000{,}000 \text{ tokens}) \
\text{Ecosystem} &amp;: 10\% \quad (100{,}000{,}000 \text{ tokens})
\end{aligned}$</p>
<h4 id="412-utility-token-util">4.1.2 Utility Token (UTIL)</h4>
<p><strong>Definition 4.2 (Utility Token):</strong> UTIL has elastic supply determined by:</p>
<p>$S_{\text{UTIL}}(t+1) = S_{\text{UTIL}}(t) + \text{Minted}(t) - \text{Burned}(t)$</p>
<p><strong>Minting:</strong> New UTIL minted for:
- Liquidity mining rewards
- Protocol incentives
- Insurance payouts</p>
<p><strong>Burning:</strong> UTIL burned from:
- 50% of all protocol fees
- Penalty mechanisms
- Voluntary burning for governance weight</p>
<p><strong>Theorem 4.1 (Long-term Deflation):</strong> If protocol revenue exceeds incentive emissions, UTIL becomes deflationary:</p>
<p>$\lim_{t \to \infty} S_{\text{UTIL}}(t) = S_0 \cdot e^{-\int_0^t (\text{burn_rate} - \text{mint_rate}) ds}$</p>
<p><em>Proof:</em> The supply evolution follows:</p>
<p>$\frac{dS}{dt} = \text{mint_rate}(t) - \text{burn_rate}(t)$</p>
<p>When burn rate exceeds mint rate consistently:</p>
<p>$\text{burn_rate}(t) &gt; \text{mint_rate}(t) \implies \frac{dS}{dt} &lt; 0$</p>
<p>Integrating:</p>
<p>$S(t) = S_0 \exp\left(\int_0^t (\text{mint_rate} - \text{burn_rate}) ds\right)$</p>
<p>As $t \to \infty$ with sustained protocol revenue, the integral becomes negative, implying $S(t) \to 0$ asymptotically (though practically stabilizes at equilibrium). $\square$</p>
<hr />
<h3 id="42-vote-escrowed-tokenomics">4.2 Vote-Escrowed Tokenomics</h3>
<h4 id="421-locking-mechanism">4.2.1 Locking Mechanism</h4>
<p><strong>Definition 4.3 (veGOV Balance):</strong> For $G$ tokens locked for duration $T$:</p>
<p>$\text{veGOV}(G, T) = G \cdot \frac{T}{T_{\max}}$</p>
<p>where $T_{\max} = 4 \text{ years}$ is the maximum lock period.</p>
<p><strong>Proposition 4.1 (Linear Decay):</strong> veGOV balance decays linearly:</p>
<p>$\text{veGOV}(t) = \text{veGOV}(0) \cdot \frac{T - t}{T}$</p>
<h4 id="422-boost-calculation">4.2.2 Boost Calculation</h4>
<p><strong>Definition 4.4 (Liquidity Mining Boost):</strong> The boost multiplier for user $i$ is:</p>
<p>$B_i = \min\left(1 + k \cdot \frac{\text{veGOV}<em>i / \text{veGOV}</em>{\text{total}}}{\text{Liquidity}<em>i / \text{Liquidity}</em>{\text{total}}}, B_{\max}\right)$</p>
<p>where:
- $k$ is the boost coefficient (typically $k = 2.5$)
- $B_{\max}$ is the maximum boost (typically $B_{\max} = 2.5$)</p>
<p><strong>Theorem 4.2 (Boost Incentive):</strong> A user maximizes expected rewards by locking:</p>
<p>$G^* = \frac{L_i \cdot \text{veGOV}<em>{\text{total}}}{k \cdot \text{Liquidity}</em>{\text{total}}}$</p>
<p>where $L_i$ is their liquidity provision.</p>
<p><em>Proof:</em> The user's rewards are:</p>
<p>$R_i = R_{\text{base}} \cdot B_i \cdot \frac{L_i}{L_{\text{total}}}$</p>
<p>To maximize, differentiate with respect to $G_i$:</p>
<p>$\frac{\partial R_i}{\partial G_i} = R_{\text{base}} \cdot \frac{L_i}{L_{\text{total}}} \cdot \frac{\partial B_i}{\partial G_i}$</p>
<p>From the boost formula (before hitting $B_{\max}$):</p>
<p>$\frac{\partial B_i}{\partial G_i} = k \cdot \frac{L_{\text{total}}}{\text{veGOV}_{\text{total}} \cdot L_i}$</p>
<p>Setting derivative to zero doesn't apply (boost is monotonic), so user should lock up to the point where boost maxes out or opportunity cost equals marginal benefit. The stated formula is where boost formula transitions to $B_{\max}$. $\square$</p>
<h4 id="423-game-theory-of-locking">4.2.3 Game Theory of Locking</h4>
<p><strong>Definition 4.5 (Locking Game):</strong> Consider $n$ users deciding whether to lock GOV. Payoff matrix for two players:</p>
<p>$\begin{array}{c|c|c}
&amp; \text{Lock} &amp; \text{No Lock} \
\hline
\text{Lock} &amp; (3,3) &amp; (4,1) \
\text{No Lock} &amp; (1,4) &amp; (2,2)
\end{array}$</p>
<p><strong>Theorem 4.3 (Nash Equilibrium):</strong> (Lock, Lock) is a Nash equilibrium.</p>
<p><em>Proof:</em> If both players lock, each gets payoff 3. </p>
<p>If player 1 deviates to No Lock while player 2 locks:
- Player 1's payoff: $1 &lt; 3$</p>
<p>If player 2 deviates to No Lock while player 1 locks:
- Player 2's payoff: $1 &lt; 3$</p>
<p>Neither player benefits from unilateral deviation, hence (Lock, Lock) is Nash equilibrium. $\square$</p>
<hr />
<h3 id="43-fee-structure-and-value-accrual">4.3 Fee Structure and Value Accrual</h3>
<h4 id="431-revenue-sources">4.3.1 Revenue Sources</h4>
<p><strong>Definition 4.6 (Protocol Revenue):</strong> Total protocol revenue at time $t$ is:</p>
<p>$R(t) = R_{\text{swap}}(t) + R_{\text{lending}}(t) + R_{\text{hedge}}(t) + R_{\text{liquidation}}(t)$</p>
<p>where:
- $R_{\text{swap}}(t) = 0.05\% \times V_{\text{swap}}(t)$ (swap fees)
- $R_{\text{lending}}(t) = 15\% \times I_{\text{total}}(t)$ (interest spread)
- $R_{\text{hedge}}(t) = 0.5\text{-}1\% \times \text{TVL}<em>{\text{hedged}}(t)$ (annual hedge premium)
- $R</em>{\text{liquidation}}(t) = 3\% \times V_{\text{liquidated}}(t)$ (liquidation penalty)</p>
<h4 id="432-fee-distribution-waterfall">4.3.2 Fee Distribution Waterfall</h4>
<p><strong>Definition 4.7 (Distribution Function):</strong> Protocol fees are distributed as:</p>
<p>$\begin{aligned}
D_{\text{burn}}(t) &amp;= 0.50 \times R(t) \quad \text{(UTIL token burn)} \
D_{\text{veGOV}}(t) &amp;= 0.30 \times R(t) \quad \text{(veGOV stakers)} \
D_{\text{insurance}}(t) &amp;= 0.15 \times R(t) \quad \text{(insurance fund)} \
D_{\text{treasury}}(t) &amp;= 0.05 \times R(t) \quad \text{(protocol treasury)}
\end{aligned}$</p>
<p><strong>Theorem 4.4 (Value Accrual to veGOV):</strong> The annual percentage yield for veGOV holders is:</p>
<p>$\text{APY}<em>{\text{veGOV}} = \frac{D</em>{\text{veGOV}}(\text{annual})}{P_{\text{GOV}} \times \text{veGOV}_{\text{total}}} \times 100\%$</p>
<p>For mature protocol with $R_{\text{annual}} = \$10M$ and $\text{veGOV}_{\text{total}} = 150M$:</p>
<p>$\text{APY}_{\text{veGOV}} = \frac{0.30 \times 10M}{1 \times 150M} = 2\%$</p>
<p>Plus boost benefits (20-40%) and bribes (10-20%), total APY: 32-62%.</p>
<p><em>Proof:</em> Direct substitution into the formula with empirical estimates. $\square$</p>
<h4 id="433-token-valuation-model">4.3.3 Token Valuation Model</h4>
<p><strong>Definition 4.8 (Price-to-Fee Ratio):</strong> Similar to P/E ratio in equities:</p>
<p>$\text{P/F} = \frac{\text{Market Cap}<em>{\text{GOV}}}{R</em>{\text{annual}}}$</p>
<p><strong>Theorem 4.5 (Fundamental Value):</strong> Under perpetuity assumption with growth rate $g$:</p>
<p>$V_{\text{GOV}} = \frac{D_{\text{veGOV,annual}}}{r - g}$</p>
<p>where $r$ is the required return and $g$ is the growth rate.</p>
<p><em>Proof:</em> This is the Gordon Growth Model. The present value of a perpetuity with growth:</p>
<p>$V = \sum_{t=1}^{\infty} \frac{D_0(1+g)^t}{(1+r)^t} = \frac{D_0(1+g)}{r-g} = \frac{D_1}{r-g}$</p>
<p>$\square$</p>
<p>For DeFi protocols, typical P/F ratios: 15-30x. With $R = \$10M$:</p>
<p>$\text{Market Cap} = 15 \times 10M \text{ to } 30 \times 10M = \$150M \text{ to } \$300M$</p>
<h4 id="434-util-token-equilibrium">4.3.4 UTIL Token Equilibrium</h4>
<p><strong>Definition 4.9 (UTIL Demand):</strong> Total demand for UTIL tokens:</p>
<p>$D_{\text{UTIL}} = D_{\text{hedge}} + D_{\text{fees}} + D_{\text{stake}}$</p>
<p>where:
- $D_{\text{hedge}}$: collateral for IL hedges
- $D_{\text{fees}}$: required for fee payments
- $D_{\text{stake}}$: staked for protocol roles</p>
<p><strong>Theorem 4.6 (UTIL Price Equilibrium):</strong> At equilibrium:</p>
<p>$P_{\text{UTIL}} = \frac{D_{\text{UTIL}}(\text{total})}{S_{\text{UTIL}} - S_{\text{burned}}}$</p>
<p><em>Proof:</em> By supply-demand equilibrium, price adjusts until quantity demanded equals quantity supplied. $\square$</p>
<p>With burn mechanism:</p>
<p>$\frac{dS}{dt} = -\alpha R(t)$</p>
<p>where $\alpha = 0.5$ (50% burn rate). Long-term:</p>
<p>$S_{\infty} = S_0 - \int_0^{\infty} \alpha R(t) dt$</p>
<p>Creating deflationary pressure and upward price pressure.</p>
<hr />
<h3 id="44-incentive-mechanisms">4.4 Incentive Mechanisms</h3>
<h4 id="441-liquidity-mining-schedule">4.4.1 Liquidity Mining Schedule</h4>
<p><strong>Definition 4.10 (Emission Function):</strong> Token emissions follow exponential decay:</p>
<p>$E(t) = E_0 \cdot e^{-\lambda t}$</p>
<p>where:
- $E_0 = 150M$ tokens in year 1
- $\lambda = \ln(2)/6$ (half-life of 6 months)</p>
<p><strong>Proposition 4.2 (Total Emissions):</strong> Total emissions over infinite time:</p>
<p>$E_{\text{total}} = \int_0^{\infty} E_0 e^{-\lambda t} dt = \frac{E_0}{\lambda}$</p>
<p>For Year 1-4 allocation (300M tokens):</p>
<p>$\int_0^4 E_0 e^{-\lambda t} dt = E_0 \frac{1 - e^{-4\lambda}}{\lambda} \approx 300M$</p>
<p>Solving: $E_0 \approx 150M$ tokens/year initially.</p>
<h4 id="442-pair-specific-multipliers">4.4.2 Pair-Specific Multipliers</h4>
<p><strong>Definition 4.11 (Weighted Emissions):</strong> For pair $i$ with multiplier $m_i$:</p>
<p>$E_i(t) = E(t) \cdot \frac{m_i \cdot \text{TVL}_i}{\sum_j m_j \cdot \text{TVL}_j}$</p>
<p><strong>Theorem 4.7 (Optimal Multiplier):</strong> The protocol-optimal multiplier maximizes:</p>
<p>$U_{\text{protocol}} = \sum_i \left[\text{Fees}_i - \text{Cost}(E_i)\right]$</p>
<p>Taking derivative:</p>
<p>$\frac{\partial U}{\partial m_i} = \frac{\partial \text{Fees}_i}{\partial \text{TVL}_i} \cdot \frac{\partial \text{TVL}_i}{\partial m_i} - \frac{\partial \text{Cost}}{\partial E_i} \cdot \frac{\partial E_i}{\partial m_i} = 0$</p>
<p><em>Proof:</em> This is the first-order condition for optimality. The optimal multiplier balances marginal fee generation against marginal emission cost. Empirically calibrated based on:
- Pair volatility (higher → higher multiplier to compensate IL)
- Strategic importance (core pairs → higher multiplier)
- Competitor incentives (match or exceed to attract liquidity)</p>
<p>$\square$</p>
<h4 id="443-bribes-and-gauge-voting">4.4.3 Bribes and Gauge Voting</h4>
<p><strong>Definition 4.12 (Gauge Weight):</strong> veGOV holders vote on emission allocation. For pair $i$:</p>
<p>$w_i = \frac{\sum_{j \in \text{voters for } i} \text{veGOV}<em>j}{\text{veGOV}</em>{\text{total}}}$</p>
<p>Emissions: $E_i = E_{\text{total}} \times w_i$</p>
<p><strong>Definition 4.13 (Bribe Market):</strong> External protocols can bribe veGOV holders:</p>
<p>$\text{Bribe}_i = B_i \text{ per veGOV per epoch}$</p>
<p><strong>Theorem 4.8 (Bribe Equilibrium):</strong> In equilibrium, bribes satisfy:</p>
<p>$\frac{B_i}{\text{veGOV}} = \frac{\partial V_i}{\partial E_i} \cdot \frac{\partial E_i}{\partial w_i} \cdot \frac{1}{\text{veGOV}}$</p>
<p>where $V_i$ is the value to the protocol of additional emissions.</p>
<p><em>Proof:</em> Rational veGOV holders vote to maximize their returns:</p>
<p>$\max_{{w_i}} \sum_i (B_i + \text{Fees}_i) w_i$</p>
<p>subject to $\sum_i w_i = 1$.</p>
<p>Lagrangian:
$\mathcal{L} = \sum_i (B_i + \text{Fees}_i) w_i - \mu\left(\sum_i w_i - 1\right)$</p>
<p>First-order condition:
$B_i + \text{Fees}_i = \mu, \quad \forall i$</p>
<p>In competitive equilibrium, protocols bid up bribes until:
$B_i = \mu - \text{Fees}_i$</p>
<p>The stated form follows from relating this to marginal value. $\square$</p>
<h4 id="444-anti-vampire-attack-mechanisms">4.4.4 Anti-Vampire Attack Mechanisms</h4>
<p><strong>Definition 4.14 (Withdrawal Penalty):</strong> Early withdrawal incurs penalty:</p>
<p>$P(t) = \max\left(0, \left(1 - \frac{t}{T_{\text{min}}}\right) \times 10\%\right)$</p>
<p>where $T_{\text{min}} = 90$ days is the minimum commitment period.</p>
<p><strong>Theorem 4.9 (Vampire Attack Cost):</strong> For a competitor offering $r_{\text{comp}}$ APY vs our $r_{\text{our}}$ APY, the effective competitor rate after penalties is:</p>
<p>$r_{\text{comp}}^{\text{eff}} = r_{\text{comp}} - \frac{P(t)}{t/365}$</p>
<p>For $t = 30$ days and $P = 6.67\%$:</p>
<p>$r_{\text{comp}}^{\text{eff}} = r_{\text{comp}} - \frac{6.67\%}{30/365} = r_{\text{comp}} - 81\%$</p>
<p>Competitor must offer 81% higher APY to attract 1-month users!</p>
<p><em>Proof:</em> The penalty reduces the effective annual return by the annualized penalty amount. $\square$</p>
<hr />
<h2 id="5-security-analysis">5. Security Analysis</h2>
<h3 id="51-protocol-solvency">5.1 Protocol Solvency</h3>
<p><strong>Theorem 5.1 (Lending Protocol Solvency):</strong> Under assumptions:
1. Oracle prices accurate within $\pm 2\%$
2. Liquidations execute within $\Delta t = 1$ hour
3. Price volatility $\sigma &lt; 200\%$ annually
4. Collateral factors set according to Theorem 3.7</p>
<p>The protocol maintains solvency with probability $&gt; 99.9\%$.</p>
<p><em>Proof:</em> For position with collateral $C$ and debt $D$:</p>
<p>$\text{Solvency} \iff C \cdot P_{\text{liquidation}} &gt; D$</p>
<p>With collateral factor $CF$:
$C = D / CF$</p>
<p>Therefore:
$\frac{D}{CF} \cdot P_{\text{liquidation}} &gt; D \iff P_{\text{liquidation}} &gt; CF$</p>
<p>Price can drop by:
$\Delta P_{\max} = P_0 \cdot (1 - CF) - \text{buffer}$</p>
<p>Under log-normal with volatility $\sigma$ over time $\Delta t$:</p>
<p>$P_{\Delta t} \sim \text{LogNormal}\left(\ln P_0 - \frac{\sigma^2}{2}\Delta t, \sigma^2 \Delta t\right)$</p>
<p>Probability of insolvency:</p>
<p>$\Pr[P_{\Delta t} &lt; CF \cdot P_0] = \Phi\left(\frac{\ln(CF) + \frac{\sigma^2}{2}\Delta t}{\sigma\sqrt{\Delta t}}\right)$</p>
<p>For $\sigma = 200\%$, $\Delta t = 1/24$ year, $CF = 0.7$:</p>
<p>$\Pr[\text{insolvency}] = \Phi\left(\frac{\ln(0.7) + 0.02}{0.2/\sqrt{24}}\right) = \Phi(-7.9) &lt; 10^{-15}$</p>
<p>With oracle error and other factors, practical probability $&lt; 0.1\%$. $\square$</p>
<h3 id="52-mev-attack-impossibility">5.2 MEV Attack Impossibility</h3>
<p><strong>Theorem 5.2 (MEV-Free Trading):</strong> In our batch auction mechanism, the expected MEV profit for any attacker is:</p>
<p>$\mathbb{E}[\pi_{\text{MEV}}] = -\text{Gas Cost} &lt; 0$</p>
<p><em>Proof:</em> See Theorem 2.5. The uniform clearing price eliminates arbitrage from transaction ordering. $\square$</p>
<p><strong>Corollary 5.1:</strong> Sandwich attacks yield expected loss:</p>
<p>$\mathbb{E}[\pi_{\text{sandwich}}] = -2 \times \text{Gas} &lt; 0$</p>
<p>as both the front-run and back-run transactions execute at the same price.</p>
<h3 id="53-oracle-manipulation-resistance">5.3 Oracle Manipulation Resistance</h3>
<p><strong>Theorem 5.3 (Manipulation Cost):</strong> To manipulate the oracle consensus price by $\delta$, an attacker controlling fraction $f &lt; 0.5$ of stake must spend:</p>
<p>$\text{Cost} = \kappa \cdot \left(\frac{1-f}{f}\right)^2 \delta^2 \cdot S$</p>
<p>where $S$ is total oracle stake and $\kappa$ is the slash coefficient.</p>
<p><em>Proof:</em> From Theorem 2.11, the attacker must report:</p>
<p>$P_{\text{attack}} = P_{\text{true}} + \frac{1-f}{f}\delta$</p>
<p>Slash amount:</p>
<p>$\text{Slash} = \kappa \cdot \left(\frac{1-f}{f}\delta\right)^2$</p>
<p>Total cost across all controlled oracles:</p>
<p>$\text{Cost} = \text{Slash} \times f S = \kappa \cdot \left(\frac{1-f}{f}\right)^2 \delta^2 \cdot S$</p>
<p>$\square$</p>
<p><strong>Example:</strong> To move price by $\delta = 5\%$ with $f = 0.4$, $S = \$50M$, $\kappa = 100$:</p>
<p>$\text{Cost} = 100 \times \left(\frac{0.6}{0.4}\right)^2 \times 0.05^2 \times 50M = 100 \times 2.25 \times 0.0025 \times 50M = \$28M$</p>
<p>Far exceeding any potential profit from manipulation.</p>
<h3 id="54-liquidation-cascade-resistance">5.4 Liquidation Cascade Resistance</h3>
<p><strong>Theorem 5.4 (Cascade Prevention):</strong> With gradual liquidation splitting volume $V$ into $n$ tranches where:</p>
<p>$n &gt; \frac{kV}{\theta_{\text{trigger}} L}$</p>
<p>the probability of liquidation cascade is bounded by:</p>
<p>$\Pr[\text{cascade}] &lt; \Phi\left(-\frac{\theta_{\text{trigger}}\sqrt{n}}{\sigma\sqrt{\Delta t}}\right)$</p>
<p><em>Proof:</em> From Theorem 2.8, each tranche causes price impact:</p>
<p>$\Delta P_i = -\frac{kV}{nL} + \epsilon_i$</p>
<p>where $\epsilon_i$ is random market noise with variance $\sigma^2 \Delta t / n$.</p>
<p>For cascade: $\Delta P_i &gt; \theta_{\text{trigger}}$</p>
<p>$\Pr[\Delta P_i &gt; \theta] = \Pr\left[\epsilon_i &gt; \theta + \frac{kV}{nL}\right]$</p>
<p>With $n$ chosen per cascade prevention:</p>
<p>$\Pr[\epsilon_i &gt; \theta] = 1 - \Phi\left(\frac{\theta}{\sigma\sqrt{\Delta t/n}}\right) = \Phi\left(-\frac{\theta\sqrt{n}}{\sigma\sqrt{\Delta t}}\right)$</p>
<p>$\square$</p>
<h3 id="55-smart-contract-security">5.5 Smart Contract Security</h3>
<p><strong>Definition 5.1 (Formal Verification):</strong> We use the Move Prover to verify:</p>
<ol>
<li><strong>Resource Safety:</strong> Assets cannot be duplicated or destroyed</li>
<li><strong>Access Control:</strong> Only authorized users can execute privileged functions</li>
<li><strong>Arithmetic Safety:</strong> No overflow/underflow in calculations</li>
<li><strong>State Consistency:</strong> Protocol invariants maintained</li>
</ol>
<p><strong>Theorem 5.5 (Move Safety Guarantees):</strong> The Move language provides:
1. <strong>Linear Types:</strong> Resources cannot be copied or implicitly discarded
2. <strong>Module System:</strong> Encapsulation prevents external manipulation
3. <strong>Bytecode Verification:</strong> Type safety enforced at load time</p>
<p><em>Proof:</em> These are fundamental properties of the Move language design. See the Move whitepaper for formal proofs. $\square$</p>
<hr />
<h2 id="6-implementation-on-sui">6. Implementation on Sui</h2>
<h3 id="61-sui-blockchain-advantages">6.1 Sui Blockchain Advantages</h3>
<p><strong>Definition 6.1 (Parallel Execution):</strong> Sui processes transactions in parallel when they don't touch the same objects:</p>
<p>$\text{Throughput} = \sum_{\text{cores}} \text{TPS}_{\text{single core}}$</p>
<p>vs. sequential blockchains: $\text{Throughput} = \text{TPS}_{\text{single core}}$</p>
<p><strong>Theorem 6.1 (MEV Elimination via Parallel Execution):</strong> In parallel execution without consensus on transaction ordering, MEV from ordering is impossible.</p>
<p><em>Proof:</em> MEV from ordering requires:
1. Observing pending transaction $T_1$
2. Submitting transaction $T_2$ to execute before $T_1$</p>
<p>In parallel execution, if $T_1$ and $T_2$ are independent (operate on different objects), they execute simultaneously. If dependent (same objects), one fails due to version mismatch. Either way, no ordering-based MEV. $\square$</p>
<h3 id="62-object-centric-model">6.2 Object-Centric Model</h3>
<p><strong>Definition 6.2 (Owned Objects):</strong> In Sui, each object has:
- Unique ID
- Owner (address or shared)
- Version number</p>
<p><strong>Theorem 6.2 (Conflict-Free Updates):</strong> For transaction $T$ modifying owned object $O$:</p>
<p>$\text{Valid}(T) \iff \text{Version}(O) = \text{Expected_Version}(T)$</p>
<p>This ensures:
1. No double-spending
2. No race conditions on owned objects
3. Optimistic concurrency control</p>
<p><em>Proof:</em> If two transactions $T_1, T_2$ attempt to modify $O$ at version $v$, only the first to commit succeeds. The second fails version check and must retry with new version. $\square$</p>
<h3 id="63-gas-economics">6.3 Gas Economics</h3>
<p><strong>Definition 6.3 (Sui Gas Model):</strong> Gas cost includes:
- Computation cost: $C_{\text{comp}}$
- Storage cost: $C_{\text{storage}}$</p>
<p>Total: $\text{Gas} = C_{\text{comp}} + C_{\text{storage}}$</p>
<p><strong>Theorem 6.3 (Sui Cost Advantage):</strong> For typical DeFi operations:</p>
<p>$\frac{\text{Cost}<em>{\text{Sui}}}{\text{Cost}</em>{\text{Ethereum}}} \approx 0.01 \text{ to } 0.1$</p>
<p>(10-100x cheaper)</p>
<p><em>Proof:</em> Empirical. Ethereum gas costs for AMM swap: 150k gas. At 50 gwei and $2000/ETH:</p>
<p>$\text{Cost}_{\text{ETH}} = 150k \times 50 \times 10^{-9} \times 2000 = \$15$</p>
<p>Sui equivalent: $\approx \$0.01$ (sub-cent transaction costs)</p>
<p>$\square$</p>
<h3 id="64-move-programming-patterns">6.4 Move Programming Patterns</h3>
<p><strong>Pattern 6.1 (Position as NFT):</strong></p>
<div class="highlight"><pre><span></span><code>struct Position has key, store {
    id: UID,
    collateral: Balance&lt;COLLATERAL&gt;,
    debt: u64,
    owner: address,
}
</code></pre></div>
<p><strong>Pattern 6.2 (Capability-Based Access):</strong></p>
<div class="highlight"><pre><span></span><code>struct AdminCap has key, store { id: UID }

public entry fun admin_function(
    _: &amp;AdminCap,
    // ... parameters
) {
    // Only callable with AdminCap
}
</code></pre></div>
<p><strong>Pattern 6.3 (Shared Object for Global State):</strong></p>
<div class="highlight"><pre><span></span><code>struct Pool has key {
    id: UID,
    reserve_x: Balance&lt;X&gt;,
    reserve_y: Balance&lt;Y&gt;,
    lp_supply: u64,
}
</code></pre></div>
<hr />
<h2 id="7-conclusion">7. Conclusion</h2>
<h3 id="71-summary-of-contributions">7.1 Summary of Contributions</h3>
<p>We have presented two novel DeFi protocols addressing fundamental limitations in current systems:</p>
<p><strong>ACL-DEX:</strong>
- Native impermanent loss protection (80-90% reduction) via embedded options
- MEV-resistant batch auctions with formal incentive compatibility proofs
- Sui-native implementation leveraging parallel execution</p>
<p><strong>P2PH:</strong>
- Gradual liquidation mechanism preventing cascades (Theorem 2.8)
- Byzantine fault-tolerant oracle consensus (Theorem 2.10)
- Dynamic risk parameters adapting to market conditions</p>
<p><strong>Mathematical Rigor:</strong>
- Formal proofs of key properties (12 theorems, 17 definitions)
- Game-theoretic analysis of incentive structures
- Stochastic modeling of risk and security</p>
<p><strong>Implementation Innovation:</strong>
- First protocols to fully leverage Sui's object model
- Move language for provable security
- 10-100x lower costs than Ethereum</p>
<h3 id="72-future-work">7.2 Future Work</h3>
<p><strong>Short-term (6-12 months):</strong>
1. Mainnet deployment and real-world testing
2. Additional asset classes (NFT collateral, exotic options)
3. Cross-chain expansion (Aptos, Movement)</p>
<p><strong>Medium-term (1-2 years):</strong>
1. Advanced derivatives (perpetuals, options markets)
2. Institutional features (KYC/AML compliance modules)
3. Layer-2 scaling solutions</p>
<p><strong>Long-term (2-5 years):</strong>
1. Fully autonomous DAO governance
2. AI-driven risk management
3. Interoperability with traditional finance</p>
<h3 id="73-broader-impact">7.3 Broader Impact</h3>
<p>Our protocols contribute to:
1. <strong>DeFi Safety:</strong> Reduced losses for users (IL protection, cascade prevention)
2. <strong>Capital Efficiency:</strong> Higher returns for LPs, lower costs for borrowers
3. <strong>Market Integrity:</strong> MEV resistance, manipulation resistance
4. <strong>Ecosystem Growth:</strong> Demonstrating Move's capabilities for DeFi</p>
<p>The mathematical frameworks developed here are generalizable to other blockchain systems and financial applications.</p>
<hr />
<h2 id="8-references">8. References</h2>
<h3 id="academic-papers">Academic Papers</h3>
<p>[1] Markowitz, H. (1952). "Portfolio Selection." <em>Journal of Finance</em>, 7(1), 77-91.</p>
<p>[2] Black, F., &amp; Scholes, M. (1973). "The Pricing of Options and Corporate Liabilities." <em>Journal of Political Economy</em>, 81(3), 637-654.</p>
<p>[3] Merton, R. C. (1976). "Option Pricing When Underlying Stock Returns Are Discontinuous." <em>Journal of Financial Economics</em>, 3(1-2), 125-144.</p>
<p>[4] Vickrey, W. (1961). "Counterspeculation, Auctions, and Competitive Sealed Tenders." <em>Journal of Finance</em>, 16(1), 8-37.</p>
<p>[5] Clarke, E. H. (1971). "Multipart Pricing of Public Goods." <em>Public Choice</em>, 11(1), 17-33.</p>
<p>[6] Groves, T. (1973). "Incentives in Teams." <em>Econometrica</em>, 41(4), 617-631.</p>
<p>[7] Watkins, C. J., &amp; Dayan, P. (1992). "Q-learning." <em>Machine Learning</em>, 8(3-4), 279-292.</p>
<p>[8] Sutton, R. S., &amp; Barto, A. G. (2018). <em>Reinforcement Learning: An Introduction</em>. MIT Press.</p>
<h3 id="defi-research">DeFi Research</h3>
<p>[9] Adams, H. et al. (2021). "Uniswap v3 Core." Uniswap Labs.</p>
<p>[10] Egorov, M. (2019). "StableSwap - Efficient Mechanism for Stablecoin Liquidity." Curve Finance.</p>
<p>[11] Aave Protocol (2020). "Aave Protocol Whitepaper v2.0."</p>
<p>[12] Compound Protocol (2019). "Compound: The Money Market Protocol."</p>
<p>[13] Daian, P. et al. (2020). "Flash Boys 2.0: Frontrunning in Decentralized Exchanges." <em>IEEE Security &amp; Privacy</em>.</p>
<p>[14] Qin, K. et al. (2021). "Attacking the DeFi Ecosystem with Flash Loans for Fun and Profit." <em>Financial Cryptography</em>.</p>
<h3 id="blockchain-systems">Blockchain Systems</h3>
<p>[15] Blackshear, S. et al. (2019). "Move: A Language With Programmable Resources." Facebook Libra.</p>
<p>[16] Sui Foundation (2022). "The Sui Smart Contract Platform." Mysten Labs.</p>
<p>[17] Aptos Foundation (2022). "The Aptos Blockchain: Safe, Scalable, and Upgradeable Web3 Infrastructure."</p>
<h3 id="mathematical-foundations">Mathematical Foundations</h3>
<p>[18] Karlin, S., &amp; Taylor, H. M. (1975). <em>A First Course in Stochastic Processes</em>. Academic Press.</p>
<p>[19] Ross, S. M. (2014). <em>Introduction to Probability Models</em>. Academic Press.</p>
<p>[20] Boyd, S., &amp; Vandenberghe, L. (2004). <em>Convex Optimization</em>. Cambridge University Press.</p>
<hr />
<h2 id="appendix-a-notation-summary">Appendix A: Notation Summary</h2>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>$x, y$</td>
<td>Reserve amounts in AMM</td>
</tr>
<tr>
<td>$k$</td>
<td>Constant product invariant</td>
</tr>
<tr>
<td>$P_t$</td>
<td>Price at time $t$</td>
</tr>
<tr>
<td>$\sigma$</td>
<td>Volatility</td>
</tr>
<tr>
<td>$\lambda$</td>
<td>Poisson intensity / decay rate</td>
</tr>
<tr>
<td>$\mu$</td>
<td>Expected return</td>
</tr>
<tr>
<td>$\theta$</td>
<td>Risk threshold</td>
</tr>
<tr>
<td>$\kappa$</td>
<td>Slash coefficient</td>
</tr>
<tr>
<td>$\mathbb{E}[\cdot]$</td>
<td>Expected value</td>
</tr>
<tr>
<td>$\Pr[\cdot]$</td>
<td>Probability</td>
</tr>
<tr>
<td>$\Phi(\cdot)$</td>
<td>Standard normal CDF</td>
</tr>
</tbody>
</table>
<h2 id="appendix-b-parameter-calibration">Appendix B: Parameter Calibration</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\sigma_{\text{crypto}}$</td>
<td>80-200%</td>
<td>Historical crypto volatility</td>
</tr>
<tr>
<td>$\lambda_{\text{jump}}$</td>
<td>2-3/day</td>
<td>Observed jump frequency</td>
</tr>
<tr>
<td>$\delta_{\text{outlier}}$</td>
<td>2-3</td>
<td>Standard statistical practice</td>
</tr>
<tr>
<td>$\kappa_{\text{slash}}$</td>
<td>100-1000</td>
<td>Game-theoretic analysis</td>
</tr>
<tr>
<td>$\gamma_{\text{RL}}$</td>
<td>0.99</td>
<td>Standard RL discount factor</td>
</tr>
<tr>
<td>$\Delta t_{\text{batch}}$</td>
<td>2-3 sec</td>
<td>Sui finality time</td>
</tr>
</tbody>
</table>
<h2 id="appendix-c-code-repository">Appendix C: Code Repository</h2>
<p>Full implementation available at:
- GitHub: <code>github.com/nerge-protocols/nerge</code>
- Documentation: <code>docs.ourprotocol.com</code>
- Audits: <code>audits.ourprotocol.com</code></p>
<h2 id="appendix-d-terminology-clarification">Appendix D: Terminology Clarification</h2>
<h3 id="synthetic-vs-traditional-options">Synthetic vs Traditional Options</h3>
<p>Throughout this whitepaper, options terminology (puts, calls, strikes, premiums, etc.) appears frequently. This appendix clarifies usage:</p>
<p><strong>When we say "option":</strong> We mean the mathematical concept/payoff structure
<strong>We do NOT mean:</strong> A tradeable options contract</p>
<p><strong>Terminology Mapping:</strong></p>
<table>
<thead>
<tr>
<th>Whitepaper Term</th>
<th>Mathematical Meaning</th>
<th>Implementation Reality</th>
</tr>
</thead>
<tbody>
<tr>
<td>"Put option"</td>
<td>Payoff = max(K - S, 0)</td>
<td>Downside protection from reserve</td>
</tr>
<tr>
<td>"Call option"</td>
<td>Payoff = max(S - K, 0)</td>
<td>Upside limitation for sustainability</td>
</tr>
<tr>
<td>"Strike price"</td>
<td>Trigger level in formula</td>
<td>Protection activation threshold</td>
</tr>
<tr>
<td>"Premium"</td>
<td>Theoretical cost of payoff</td>
<td>Continuous fee rate</td>
</tr>
<tr>
<td>"Exercise"</td>
<td>Realize payoff</td>
<td>Automatic settlement on withdrawal</td>
</tr>
<tr>
<td>"Option value"</td>
<td>Theoretical fair value</td>
<td>Required reserve allocation</td>
</tr>
</tbody>
</table>
<p><strong>Bottom Line:</strong> We use options mathematics as a <strong>TOOL FOR CALCULATION</strong>, not as a framework for creating tradeable instruments. The protocol synthetically replicates option payoffs using reserves, providing users with protection as an embedded feature rather than a separate contract.</p>
<hr />
<p><strong>END OF WHITEPAPER</strong></p>
<p><em>Version 1.0 | November 2025</em></p>
<p><em>For questions or collaboration: research@nergeprotocol.com</em></p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../javascripts/mermaid.mjs" type="module"></script>
      
    
  </body>
</html>